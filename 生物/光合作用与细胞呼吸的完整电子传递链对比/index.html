<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…‰åˆä½œç”¨ä¸ç»†èƒå‘¼å¸ç”µå­ä¼ é€’é“¾å¯¹æ¯”åŠ¨ç”»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a1929 0%, #1a2b3c 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 200, 150, 0.3);
        }
        
        h1 {
            color: #4cd9b0;
            font-size: 2.4rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            color: #a0d8f0;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .animation-container {
            background: rgba(20, 35, 50, 0.8);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(100, 180, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .canvas-wrapper {
            position: relative;
            width: 100%;
            height: 600px;
            margin-bottom: 15px;
        }
        
        #mainCanvas {
            background-color: rgba(10, 25, 40, 0.9);
            border-radius: 10px;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(30, 45, 65, 0.6);
            border-radius: 10px;
        }
        
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(to right, #2a5a7a, #3a7a9a);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-primary {
            background: linear-gradient(to right, #2a8a6f, #3aaa8f);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #7a4a9a, #9a6aba);
        }
        
        .btn-view {
            background: linear-gradient(to right, #4a6a9a, #6a8aba);
        }
        
        .btn-active {
            box-shadow: 0 0 0 3px rgba(100, 200, 255, 0.5);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #a0c0e0;
        }
        
        #speedSlider {
            width: 150px;
        }
        
        .info-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .data-panel, .legend-panel {
            flex: 1;
            min-width: 300px;
            background: rgba(25, 40, 60, 0.7);
            border-radius: 10px;
            padding: 18px;
            border-left: 5px solid #4cd9b0;
        }
        
        .legend-panel {
            border-left-color: #ff9966;
        }
        
        .panel-title {
            color: #4cd9b0;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-panel .panel-title {
            color: #ff9966;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .data-item {
            background: rgba(40, 60, 85, 0.5);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #4cd9b0;
        }
        
        .data-label {
            font-size: 0.9rem;
            color: #a0c0e0;
            margin-bottom: 5px;
        }
        
        .data-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #4cd9b0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 12px;
        }
        
        .legend-text {
            font-size: 0.95rem;
        }
        
        .highlight-box {
            position: absolute;
            background: rgba(30, 60, 90, 0.9);
            border: 2px solid #4cd9b0;
            border-radius: 10px;
            padding: 20px;
            max-width: 400px;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            display: none;
        }
        
        .highlight-title {
            color: #4cd9b0;
            font-size: 1.3rem;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(76, 217, 176, 0.3);
            padding-bottom: 5px;
        }
        
        .highlight-desc {
            line-height: 1.6;
            color: #c0d0e0;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(76, 217, 176, 0.2);
            color: #4cd9b0;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        
        .footer-note {
            text-align: center;
            margin-top: 30px;
            color: #8090a0;
            font-size: 0.9rem;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 150, 200, 0.2);
        }
        
        @media (max-width: 768px) {
            .canvas-wrapper {
                height: 500px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-group {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å…‰åˆä½œç”¨ä¸ç»†èƒå‘¼å¸ç”µå­ä¼ é€’é“¾å¯¹æ¯”</h1>
            <p class="subtitle">å¯è§†åŒ–å¯¹æ¯”ç±»å›Šä½“è†œä¸çº¿ç²’ä½“å†…è†œä¸Šçš„ç”µå­ä¼ é€’è¿‡ç¨‹ï¼Œç†è§£åŒ–å­¦æ¸—é€ä½œç”¨çš„å…±åŒåŸç†</p>
        </header>
        
        <main class="main-content">
            <div class="animation-container">
                <div class="canvas-wrapper">
                    <canvas id="mainCanvas" width="1360" height="600"></canvas>
                    <div id="highlightBox" class="highlight-box">
                        <button class="close-btn" id="closeHighlight">Ã—</button>
                        <div class="highlight-title" id="highlightTitle">ç»„ä»¶åç§°</div>
                        <div class="highlight-desc" id="highlightDesc">ç»„ä»¶è¯¦ç»†æè¿°å°†åœ¨è¿™é‡Œæ˜¾ç¤ºã€‚</div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <button id="playBtn" class="btn btn-primary">â–¶ æ’­æ”¾</button>
                        <button id="pauseBtn" class="btn">â¸ æš‚åœ</button>
                        <button id="resetBtn" class="btn">â†º é‡ç½®</button>
                    </div>
                    
                    <div class="control-group">
                        <button id="viewCompare" class="btn btn-view btn-active">å¯¹æ¯”è§†å›¾</button>
                        <button id="viewPhotosynthesis" class="btn btn-view">ä»…å…‰åˆä½œç”¨</button>
                        <button id="viewRespiration" class="btn btn-view">ä»…ç»†èƒå‘¼å¸</button>
                    </div>
                    
                    <div class="control-group">
                        <button id="toggleLabels" class="btn btn-secondary">æ˜¾ç¤ºæ ‡ç­¾</button>
                        <button id="trackElectrons" class="btn btn-secondary">è¿½è¸ªç”µå­</button>
                        <button id="trackProtons" class="btn btn-secondary">è¿½è¸ªè´¨å­</button>
                    </div>
                    
                    <div class="slider-container">
                        <span>åŠ¨ç”»é€Ÿåº¦:</span>
                        <input type="range" id="speedSlider" min="0.5" max="3" step="0.1" value="1">
                        <span id="speedValue">1.0x</span>
                    </div>
                </div>
                
                <div class="info-panel">
                    <div class="data-panel">
                        <div class="panel-title">ğŸ“Š å®æ—¶æ•°æ®é¢æ¿</div>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">å…‰åˆä½œç”¨è´¨å­æ¢¯åº¦ (Hâº)</div>
                                <div class="data-value" id="photoProtonGradient">0</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">ç»†èƒå‘¼å¸è´¨å­æ¢¯åº¦ (Hâº)</div>
                                <div class="data-value" id="respProtonGradient">0</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">å…‰åˆä½œç”¨ ATP äº§é‡</div>
                                <div class="data-value" id="photoATP">0</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">ç»†èƒå‘¼å¸ ATP äº§é‡</div>
                                <div class="data-value" id="respATP">0</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Oâ‚‚ ç”Ÿæˆ/æ¶ˆè€—é€Ÿç‡</div>
                                <div class="data-value" id="oxygenRate">0</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">COâ‚‚ å›ºå®š/é‡Šæ”¾é€Ÿç‡</div>
                                <div class="data-value" id="co2Rate">0</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="legend-panel">
                        <div class="panel-title">ğŸ¨ å›¾ä¾‹è¯´æ˜</div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #4cd9b0;"></div>
                            <div class="legend-text">å…‰åˆä½œç”¨ (ç±»å›Šä½“è†œ)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ff9966;"></div>
                            <div class="legend-text">ç»†èƒå‘¼å¸ (çº¿ç²’ä½“å†…è†œ)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ffeb3b;"></div>
                            <div class="legend-text">ç”µå­ (eâ»)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #64b5f6;"></div>
                            <div class="legend-text">è´¨å­ (Hâº) - å…‰åˆä½œç”¨</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ff6b9d;"></div>
                            <div class="legend-text">è´¨å­ (Hâº) - ç»†èƒå‘¼å¸</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ff5252;"></div>
                            <div class="legend-text">ATP (èƒ½é‡åˆ†å­)</div>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #9c27b0;"></div>
                            <div class="legend-text">ATPåˆæˆé…¶ (å…±åŒç»„ä»¶)</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="footer-note">
            <p>æ•™å­¦åŠ¨ç”»è®¾è®¡ï¼šå…‰åˆä½œç”¨ä¸ç»†èƒå‘¼å¸ç”µå­ä¼ é€’é“¾å¯¹æ¯” | äº¤äº’å¼ç”Ÿç‰©å­¦æ•™å­¦å·¥å…·</p>
            <p>æç¤ºï¼šç‚¹å‡»åŠ¨ç”»ä¸­çš„ç»„ä»¶æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œä½¿ç”¨æ§åˆ¶æŒ‰é’®è°ƒæ•´å­¦ä¹ èŠ‚å¥</p>
        </footer>
    </div>

    <script>
        // ä¸»Canvaså’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        
        // åŠ¨ç”»çŠ¶æ€
        let animationId = null;
        let isPlaying = true;
        let animationSpeed = 1.0;
        let time = 0;
        
        // è§†å›¾æ¨¡å¼: 0=å¯¹æ¯”, 1=ä»…å…‰åˆä½œç”¨, 2=ä»…ç»†èƒå‘¼å¸
        let viewMode = 0;
        
        // äº¤äº’çŠ¶æ€
        let showLabels = true;
        let trackElectrons = false;
        let trackProtons = false;
        
        // é«˜äº®ä¿¡æ¯æ¡†
        const highlightBox = document.getElementById('highlightBox');
        const highlightTitle = document.getElementById('highlightTitle');
        const highlightDesc = document.getElementById('highlightDesc');
        
        // æ•°æ®é¢æ¿å…ƒç´ 
        const photoProtonGradient = document.getElementById('photoProtonGradient');
        const respProtonGradient = document.getElementById('respProtonGradient');
        const photoATP = document.getElementById('photoATP');
        const respATP = document.getElementById('respATP');
        const oxygenRate = document.getElementById('oxygenRate');
        const co2Rate = document.getElementById('co2Rate');
        
        // åŠ¨ç”»æ•°æ®
        let animationData = {
            photoProtons: 0,
            respProtons: 0,
            photoATPCount: 0,
            respATPCount: 0,
            oxygenRate: 0,
            co2Rate: 0
        };
        
        // ç»„ä»¶å®šä¹‰
        const components = {
            // å…‰åˆä½œç”¨ç»„ä»¶
            photosynthesis: [
                { id: 'psii', name: 'å…‰ç³»ç»Ÿ II (PSII)', x: 200, y: 200, width: 80, height: 40, color: '#2ecc71', 
                  desc: 'å¸æ”¶å…‰èƒ½ï¼Œè£‚è§£æ°´åˆ†å­ï¼Œé‡Šæ”¾æ°§æ°”ï¼Œå¹¶å°†ç”µå­ä¼ é€’ç»™è´¨ä½“é†Œ(PQ)ã€‚' },
                { id: 'cytb6f', name: 'ç»†èƒè‰²ç´  b6f å¤åˆä½“', x: 320, y: 200, width: 100, height: 40, color: '#27ae60',
                  desc: 'ä¼ é€’ç”µå­ï¼ŒåŒæ—¶å°†è´¨å­ä»åŸºè´¨æ³µå…¥ç±»å›Šä½“è…”ï¼Œå»ºç«‹è´¨å­æ¢¯åº¦ã€‚' },
                { id: 'psi', name: 'å…‰ç³»ç»Ÿ I (PSI)', x: 460, y: 200, width: 80, height: 40, color: '#1abc9c',
                  desc: 'å¸æ”¶å…‰èƒ½ï¼Œå°†ç”µå­ä¼ é€’ç»™é“æ°§è¿˜è›‹ç™½(Fd)ï¼Œæœ€ç»ˆè¿˜åŸNADP+ä¸ºNADPHã€‚' },
                { id: 'atpSynthasePhoto', name: 'ATPåˆæˆé…¶', x: 600, y: 200, width: 60, height: 60, color: '#9c27b0',
                  desc: 'åˆ©ç”¨è´¨å­æ¢¯åº¦é©±åŠ¨ATPåˆæˆï¼Œå°†ADPå’ŒPiè½¬åŒ–ä¸ºATPã€‚' },
                { id: 'water', name: 'æ°´è£‚è§£', x: 120, y: 200, width: 60, height: 30, color: '#3498db',
                  desc: '2Hâ‚‚O â†’ 4Hâº + 4eâ» + Oâ‚‚ï¼Œæä¾›ç”µå­å’Œè´¨å­ï¼Œé‡Šæ”¾æ°§æ°”ã€‚' }
            ],
            
            // ç»†èƒå‘¼å¸ç»„ä»¶
            respiration: [
                { id: 'complexI', name: 'å¤åˆä½“ I (NADHè„±æ°¢é…¶)', x: 200, y: 400, width: 100, height: 40, color: '#e74c3c',
                  desc: 'æ¥å—æ¥è‡ªNADHçš„ç”µå­ï¼Œä¼ é€’è‡³è¾…é…¶Qï¼ŒåŒæ—¶å°†è´¨å­æ³µå…¥è†œé—´éš™ã€‚' },
                { id: 'complexII', name: 'å¤åˆä½“ II (ç¥ç€é…¸è„±æ°¢é…¶)', x: 340, y: 400, width: 100, height: 40, color: '#c0392b',
                  desc: 'æ¥å—æ¥è‡ªFADHâ‚‚çš„ç”µå­ï¼Œä¼ é€’è‡³è¾…é…¶Qï¼Œä½†ä¸æ³µé€è´¨å­ã€‚' },
                { id: 'complexIII', name: 'å¤åˆä½“ III (ç»†èƒè‰²ç´ bc1)', x: 480, y: 400, width: 100, height: 40, color: '#d35400',
                  desc: 'ä¼ é€’ç”µå­è‡³ç»†èƒè‰²ç´ cï¼ŒåŒæ—¶å°†è´¨å­æ³µå…¥è†œé—´éš™ã€‚' },
                { id: 'complexIV', name: 'å¤åˆä½“ IV (ç»†èƒè‰²ç´ cæ°§åŒ–é…¶)', x: 620, y: 400, width: 100, height: 40, color: '#e67e22',
                  desc: 'å°†ç”µå­ä¼ é€’ç»™æ°§æ°”ï¼Œä¸è´¨å­ç»“åˆç”Ÿæˆæ°´ã€‚' },
                { id: 'atpSynthaseResp', name: 'ATPåˆæˆé…¶', x: 780, y: 400, width: 60, height: 60, color: '#9c27b0',
                  desc: 'åˆ©ç”¨è´¨å­æ¢¯åº¦é©±åŠ¨ATPåˆæˆï¼Œå°†ADPå’ŒPiè½¬åŒ–ä¸ºATPã€‚' }
            ]
        };
        
        // ç”µå­å’Œè´¨å­ç²’å­
        let electrons = [];
        let protonsPhoto = [];
        let protonsResp = [];
        let atpParticles = [];
        
        // åˆå§‹åŒ–ç²’å­
        function initParticles() {
            electrons = [];
            protonsPhoto = [];
            protonsResp = [];
            atpParticles = [];
            
            // åˆå§‹åŒ–å…‰åˆä½œç”¨ç”µå­
            for (let i = 0; i < 8; i++) {
                electrons.push({
                    x: 120 + Math.random() * 20,
                    y: 200 + Math.random() * 20,
                    targetX: 200,
                    targetY: 200,
                    speed: 0.5 + Math.random() * 0.3,
                    color: '#ffeb3b',
                    type: 'electron',
                    system: 'photo',
                    active: true,
                    path: ['water', 'psii', 'cytb6f', 'psi'],
                    pathIndex: 0
                });
            }
            
            // åˆå§‹åŒ–ç»†èƒå‘¼å¸ç”µå­
            for (let i = 0; i < 6; i++) {
                electrons.push({
                    x: 150 + Math.random() * 20,
                    y: 400 + Math.random() * 20,
                    targetX: 200,
                    targetY: 400,
                    speed: 0.5 + Math.random() * 0.3,
                    color: '#ffeb3b',
                    type: 'electron',
                    system: 'resp',
                    active: true,
                    path: ['complexI', 'complexIII', 'complexIV'],
                    pathIndex: 0
                });
            }
            
            // åˆå§‹åŒ–å…‰åˆä½œç”¨è´¨å­
            for (let i = 0; i < 5; i++) {
                protonsPhoto.push({
                    x: 320 + Math.random() * 20,
                    y: 180 + Math.random() * 10,
                    targetX: 320,
                    targetY: 150,
                    speed: 0.3 + Math.random() * 0.2,
                    color: '#64b5f6',
                    type: 'proton',
                    system: 'photo',
                    active: false
                });
            }
            
            // åˆå§‹åŒ–ç»†èƒå‘¼å¸è´¨å­
            for (let i = 0; i < 5; i++) {
                protonsResp.push({
                    x: 200 + Math.random() * 20,
                    y: 380 + Math.random() * 10,
                    targetX: 200,
                    targetY: 350,
                    speed: 0.3 + Math.random() * 0.2,
                    color: '#ff6b9d',
                    type: 'proton',
                    system: 'resp',
                    active: false
                });
            }
        }
        
        // ç»˜åˆ¶è†œç»“æ„
        function drawMembranes() {
            // å…‰åˆä½œç”¨ç±»å›Šä½“è†œ
            if (viewMode === 0 || viewMode === 1) {
                ctx.save();
                ctx.strokeStyle = '#2ecc71';
                ctx.lineWidth = 3;
                ctx.setLineDash([5, 5]);
                
                // ç±»å›Šä½“è†œ
                ctx.beginPath();
                ctx.moveTo(100, 150);
                ctx.lineTo(700, 150);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(100, 250);
                ctx.lineTo(700, 250);
                ctx.stroke();
                
                ctx.setLineDash([]);
                
                // æ ‡æ³¨
                ctx.fillStyle = '#2ecc71';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('ç±»å›Šä½“è†œ (å…‰åˆä½œç”¨)', 100, 130);
                ctx.fillText('ç±»å›Šä½“è…”', 350, 170);
                ctx.fillText('åŸºè´¨', 350, 290);
                
                ctx.restore();
            }
            
            // ç»†èƒå‘¼å¸çº¿ç²’ä½“å†…è†œ
            if (viewMode === 0 || viewMode === 2) {
                ctx.save();
                ctx.strokeStyle = '#ff9966';
                ctx.lineWidth = 3;
                ctx.setLineDash([5, 5]);
                
                // çº¿ç²’ä½“å†…è†œ
                ctx.beginPath();
                ctx.moveTo(100, 350);
                ctx.lineTo(900, 350);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(100, 450);
                ctx.lineTo(900, 450);
                ctx.stroke();
                
                ctx.setLineDash([]);
                
                // æ ‡æ³¨
                ctx.fillStyle = '#ff9966';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('çº¿ç²’ä½“å†…è†œ (ç»†èƒå‘¼å¸)', 100, 330);
                ctx.fillText('è†œé—´éš™', 350, 370);
                ctx.fillText('åŸºè´¨', 350, 490);
                
                ctx.restore();
            }
        }
        
        // ç»˜åˆ¶ç»„ä»¶
        function drawComponents() {
            // ç»˜åˆ¶å…‰åˆä½œç”¨ç»„ä»¶
            if (viewMode === 0 || viewMode === 1) {
                components.photosynthesis.forEach(comp => {
                    drawComponent(comp, '#2ecc71');
                });
            }
            
            // ç»˜åˆ¶ç»†èƒå‘¼å¸ç»„ä»¶
            if (viewMode === 0 || viewMode === 2) {
                components.respiration.forEach(comp => {
                    drawComponent(comp, '#ff9966');
                });
            }
        }
        
        // ç»˜åˆ¶å•ä¸ªç»„ä»¶
        function drawComponent(comp, borderColor) {
            ctx.save();
            
            // ç»„ä»¶ä¸»ä½“
            ctx.fillStyle = comp.color + '40'; // åŠé€æ˜
            ctx.fillRect(comp.x, comp.y, comp.width, comp.height);
            
            // è¾¹æ¡†
            ctx.strokeStyle = borderColor;
            ctx.lineWidth = 2;
            ctx.strokeRect(comp.x, comp.y, comp.width, comp.height);
            
            // æ ‡ç­¾
            if (showLabels) {
                ctx.fillStyle = '#ffffff';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                const lines = wrapText(ctx, comp.name, comp.x + comp.width/2, comp.y + comp.height/2 - 5, comp.width - 10, 12);
                
                // å¦‚æœæœ‰ä¸¤è¡Œï¼Œè°ƒæ•´ä½ç½®
                if (lines.length > 1) {
                    ctx.fillText(lines[0], comp.x + comp.width/2, comp.y + comp.height/2 - 8);
                    ctx.fillText(lines[1], comp.x + comp.width/2, comp.y + comp.height/2 + 8);
                } else {
                    ctx.fillText(comp.name, comp.x + comp.width/2, comp.y + comp.height/2 + 5);
                }
            }
            
            ctx.restore();
        }
        
        // æ–‡æœ¬æ¢è¡Œè¾…åŠ©å‡½æ•°
        function wrapText(context, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            const lines = [];
            let currentLine = words[0];
            
            for (let i = 1; i < words.length; i++) {
                const word = words[i];
                const width = context.measureText(currentLine + " " + word).width;
                if (width < maxWidth) {
                    currentLine += " " + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);
            return lines;
        }
        
        // æ›´æ–°å’Œç»˜åˆ¶ç²’å­
        function updateParticles() {
            // æ›´æ–°ç”µå­
            electrons.forEach(electron => {
                if (!electron.active) return;
                
                // æ£€æŸ¥ç”µå­å±äºå“ªä¸ªç³»ç»Ÿï¼Œæ˜¯å¦åº”è¯¥æ˜¾ç¤º
                if ((electron.system === 'photo' && (viewMode === 2)) || 
                    (electron.system === 'resp' && (viewMode === 1))) {
                    return;
                }
                
                // ç§»åŠ¨åˆ°ç›®æ ‡
                const dx = electron.targetX - electron.x;
                const dy = electron.targetY - electron.y;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                if (distance < 5) {
                    // åˆ°è¾¾ç›®æ ‡ï¼Œæ›´æ–°åˆ°ä¸‹ä¸€ä¸ªè·¯å¾„ç‚¹
                    electron.pathIndex++;
                    if (electron.pathIndex >= electron.path.length) {
                        // è·¯å¾„ç»“æŸï¼Œé‡ç½®
                        electron.pathIndex = 0;
                        if (electron.system === 'photo') {
                            electron.x = 120 + Math.random() * 20;
                            electron.y = 200 + Math.random() * 20;
                            electron.targetX = 200;
                            electron.targetY = 200;
                        } else {
                            electron.x = 150 + Math.random() * 20;
                            electron.y = 400 + Math.random() * 20;
                            electron.targetX = 200;
                            electron.targetY = 400;
                        }
                    } else {
                        // è®¾ç½®ä¸‹ä¸€ä¸ªç›®æ ‡
                        const nextTarget = electron.path[electron.pathIndex];
                        let targetComp;
                        
                        if (electron.system === 'photo') {
                            targetComp = components.photosynthesis.find(c => c.id === nextTarget);
                        } else {
                            targetComp = components.respiration.find(c => c.id === nextTarget);
                        }
                        
                        if (targetComp) {
                            electron.targetX = targetComp.x + targetComp.width/2;
                            electron.targetY = targetComp.y + targetComp.height/2;
                        }
                    }
                } else {
                    // å‘ç›®æ ‡ç§»åŠ¨
                    electron.x += (dx / distance) * electron.speed * animationSpeed;
                    electron.y += (dy / distance) * electron.speed * animationSpeed;
                }
                
                // ç»˜åˆ¶ç”µå­
                ctx.save();
                ctx.fillStyle = electron.color;
                if (trackElectrons) {
                    ctx.shadowColor = electron.color;
                    ctx.shadowBlur = 15;
                }
                ctx.beginPath();
                ctx.arc(electron.x, electron.y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });
            
            // æ›´æ–°å…‰åˆä½œç”¨è´¨å­
            protonsPhoto.forEach(proton => {
                if (!proton.active) {
                    // éšæœºæ¿€æ´»è´¨å­
                    if (Math.random() < 0.02 * animationSpeed && viewMode !== 2) {
                        proton.active = true;
                    }
                    return;
                }
                
                // ç§»åŠ¨åˆ°ç›®æ ‡
                const dx = proton.targetX - proton.x;
                const dy = proton.targetY - proton.y;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                if (distance < 5) {
                    // åˆ°è¾¾ç›®æ ‡ï¼Œé‡ç½®
                    proton.active = false;
                    proton.x = 320 + Math.random() * 20;
                    proton.y = 180 + Math.random() * 10;
                    proton.targetX = 320;
                    proton.targetY = 150;
                    
                    // å¢åŠ è´¨å­æ¢¯åº¦è®¡æ•°
                    animationData.photoProtons = Math.min(animationData.photoProtons + 1, 100);
                    
                    // å¶å°”äº§ç”ŸATP
                    if (Math.random() < 0.3) {
                        createATPParticle('photo', 600, 200);
                        animationData.photoATPCount++;
                    }
                } else {
                    // å‘ç›®æ ‡ç§»åŠ¨
                    proton.x += (dx / distance) * proton.speed * animationSpeed;
                    proton.y += (dy / distance) * proton.speed * animationSpeed;
                }
                
                // ç»˜åˆ¶è´¨å­
                ctx.save();
                ctx.fillStyle = proton.color;
                if (trackProtons) {
                    ctx.shadowColor = proton.color;
                    ctx.shadowBlur = 15;
                }
                ctx.beginPath();
                ctx.arc(proton.x, proton.y, 3, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });
            
            // æ›´æ–°ç»†èƒå‘¼å¸è´¨å­
            protonsResp.forEach(proton => {
                if (!proton.active) {
                    // éšæœºæ¿€æ´»è´¨å­
                    if (Math.random() < 0.02 * animationSpeed && viewMode !== 1) {
                        proton.active = true;
                    }
                    return;
                }
                
                // ç§»åŠ¨åˆ°ç›®æ ‡
                const dx = proton.targetX - proton.x;
                const dy = proton.targetY - proton.y;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                if (distance < 5) {
                    // åˆ°è¾¾ç›®æ ‡ï¼Œé‡ç½®
                    proton.active = false;
                    proton.x = 200 + Math.random() * 20;
                    proton.y = 380 + Math.random() * 10;
                    proton.targetX = 200;
                    proton.targetY = 350;
                    
                    // å¢åŠ è´¨å­æ¢¯åº¦è®¡æ•°
                    animationData.respProtons = Math.min(animationData.respProtons + 1, 100);
                    
                    // å¶å°”äº§ç”ŸATP
                    if (Math.random() < 0.3) {
                        createATPParticle('resp', 780, 400);
                        animationData.respATPCount++;
                    }
                } else {
                    // å‘ç›®æ ‡ç§»åŠ¨
                    proton.x += (dx / distance) * proton.speed * animationSpeed;
                    proton.y += (dy / distance) * proton.speed * animationSpeed;
                }
                
                // ç»˜åˆ¶è´¨å­
                ctx.save();
                ctx.fillStyle = proton.color;
                if (trackProtons) {
                    ctx.shadowColor = proton.color;
                    ctx.shadowBlur = 15;
                }
                ctx.beginPath();
                ctx.arc(proton.x, proton.y, 3, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });
            
            // æ›´æ–°å’Œç»˜åˆ¶ATPç²’å­
            for (let i = atpParticles.length - 1; i >= 0; i--) {
                const atp = atpParticles[i];
                
                atp.y -= atp.speed * animationSpeed;
                atp.life--;
                
                if (atp.life <= 0) {
                    atpParticles.splice(i, 1);
                    continue;
                }
                
                // ç»˜åˆ¶ATPç²’å­
                ctx.save();
                ctx.globalAlpha = atp.life / 100;
                ctx.fillStyle = atp.color;
                ctx.font = 'bold 14px Arial';
                ctx.fillText('ATP', atp.x, atp.y);
                ctx.restore();
            }
        }
        
        // åˆ›å»ºATPç²’å­
        function createATPParticle(system, x, y) {
            atpParticles.push({
                x: x + 30,
                y: y - 10,
                speed: 0.5 + Math.random() * 0.3,
                color: '#ff5252',
                life: 100,
                system: system
            });
        }
        
        // ç»˜åˆ¶è¿æ¥çº¿å’Œç®­å¤´
        function drawConnections() {
            ctx.save();
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.setLineDash([2, 2]);
            
            // å…‰åˆä½œç”¨è¿æ¥çº¿
            if (viewMode === 0 || viewMode === 1) {
                ctx.beginPath();
                ctx.moveTo(180, 220); // PSII å³ä¾§
                ctx.lineTo(320, 220); // Cyt b6f å·¦ä¾§
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(420, 220); // Cyt b6f å³ä¾§
                ctx.lineTo(460, 220); // PSI å·¦ä¾§
                ctx.stroke();
                
                // è´¨å­æ³µç®­å¤´
                drawArrow(320, 180, 320, 150, '#64b5f6');
                
                // ATPåˆæˆé…¶ç®­å¤´
                drawArrow(600, 150, 600, 180, '#9c27b0');
            }
            
            // ç»†èƒå‘¼å¸è¿æ¥çº¿
            if (viewMode === 0 || viewMode === 2) {
                ctx.beginPath();
                ctx.moveTo(300, 420); // Complex I å³ä¾§
                ctx.lineTo(480, 420); // Complex III å·¦ä¾§
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(580, 420); // Complex III å³ä¾§
                ctx.lineTo(620, 420); // Complex IV å·¦ä¾§
                ctx.stroke();
                
                // è´¨å­æ³µç®­å¤´
                drawArrow(200, 380, 200, 350, '#ff6b9d');
                drawArrow(480, 380, 480, 350, '#ff6b9d');
                
                // ATPåˆæˆé…¶ç®­å¤´
                drawArrow(780, 350, 780, 380, '#9c27b0');
            }
            
            ctx.restore();
        }
        
        // ç»˜åˆ¶ç®­å¤´
        function drawArrow(fromX, fromY, toX, toY, color) {
            ctx.save();
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶çº¿
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            
            // ç»˜åˆ¶ç®­å¤´å¤´éƒ¨
            const headlen = 8;
            const angle = Math.atan2(toY - fromY, toX - fromX);
            
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headlen * Math.cos(angle - Math.PI/6), toY - headlen * Math.sin(angle - Math.PI/6));
            ctx.lineTo(toX - headlen * Math.cos(angle + Math.PI/6), toY - headlen * Math.sin(angle + Math.PI/6));
            ctx.closePath();
           
<!--æ£€æµ‹åˆ°ä»£ç æˆªæ–­ï¼Œè‡ªåŠ¨ç»­å†™ä¸­...-->
ctx.fill();
            
            ctx.restore();
        }
        
        // ç»˜åˆ¶æ ‡é¢˜å’Œè¯´æ˜
        function drawTitles() {
            ctx.save();
            ctx.fillStyle = '#4cd9b0';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            
            if (viewMode === 0 || viewMode === 1) {
                ctx.fillText('å…‰åˆä½œç”¨ç”µå­ä¼ é€’é“¾ (å…‰ååº”)', 400, 100);
            }
            
            if (viewMode === 0 || viewMode === 2) {
                const yPos = viewMode === 0 ? 500 : 100;
                ctx.fillText('ç»†èƒå‘¼å¸ç”µå­ä¼ é€’é“¾ (æœ‰æ°§å‘¼å¸)', 500, yPos);
            }
            
            // ç»˜åˆ¶å…±åŒåŸç†è¯´æ˜
            ctx.fillStyle = '#ffffff';
            ctx.font = '14px Arial';
            ctx.textAlign = 'left';
            
            if (viewMode === 0) {
                ctx.fillText('å…±åŒåŸç†: åŒ–å­¦æ¸—é€ä½œç”¨ - é€šè¿‡å»ºç«‹è´¨å­æ¢¯åº¦é©±åŠ¨ATPåˆæˆ', 50, 550);
            }
            
            ctx.restore();
        }
        
        // æ›´æ–°æ•°æ®é¢æ¿
        function updateDataPanel() {
            // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
            if (isPlaying) {
                // å…‰åˆä½œç”¨è´¨å­æ¢¯åº¦æ³¢åŠ¨
                if (viewMode !== 2) {
                    animationData.photoProtons = Math.min(
                        animationData.photoProtons + 0.5 * animationSpeed, 
                        100
                    );
                    
                    // å¶å°”å‡å°‘ï¼ˆæ¨¡æ‹ŸATPåˆæˆæ¶ˆè€—ï¼‰
                    if (Math.random() < 0.05) {
                        animationData.photoProtons = Math.max(animationData.photoProtons - 10, 0);
                    }
                }
                
                // ç»†èƒå‘¼å¸è´¨å­æ¢¯åº¦æ³¢åŠ¨
                if (viewMode !== 1) {
                    animationData.respProtons = Math.min(
                        animationData.respProtons + 0.3 * animationSpeed, 
                        100
                    );
                    
                    // å¶å°”å‡å°‘ï¼ˆæ¨¡æ‹ŸATPåˆæˆæ¶ˆè€—ï¼‰
                    if (Math.random() < 0.05) {
                        animationData.respProtons = Math.max(animationData.respProtons - 10, 0);
                    }
                }
                
                // ATPè®¡æ•°ç¼“æ…¢å¢åŠ 
                if (viewMode !== 2 && Math.random() < 0.02 * animationSpeed) {
                    animationData.photoATPCount++;
                }
                
                if (viewMode !== 1 && Math.random() < 0.02 * animationSpeed) {
                    animationData.respATPCount++;
                }
                
                // æ°§æ°”å’ŒCO2é€Ÿç‡
                if (viewMode === 0) {
                    animationData.oxygenRate = 5 + Math.sin(time * 0.1) * 2;
                    animationData.co2Rate = 4 + Math.cos(time * 0.1) * 2;
                } else if (viewMode === 1) {
                    animationData.oxygenRate = 8 + Math.sin(time * 0.1) * 3;
                    animationData.co2Rate = -2; // è´Ÿå€¼è¡¨ç¤ºå›ºå®šCO2
                } else {
                    animationData.oxygenRate = -6; // è´Ÿå€¼è¡¨ç¤ºæ¶ˆè€—O2
                    animationData.co2Rate = 6 + Math.cos(time * 0.1) * 2;
                }
            }
            
            // æ›´æ–°æ˜¾ç¤º
            photoProtonGradient.textContent = Math.round(animationData.photoProtons);
            respProtonGradient.textContent = Math.round(animationData.respProtons);
            photoATP.textContent = animationData.photoATPCount;
            respATP.textContent = animationData.respATPCount;
            oxygenRate.textContent = animationData.oxygenRate.toFixed(1);
            co2Rate.textContent = animationData.co2Rate.toFixed(1);
        }
        
        // ä¸»åŠ¨ç”»å¾ªç¯
        function animate() {
            // æ¸…é™¤ç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
            drawGrid();
            
            // ç»˜åˆ¶è†œç»“æ„
            drawMembranes();
            
            // ç»˜åˆ¶è¿æ¥çº¿
            drawConnections();
            
            // ç»˜åˆ¶ç»„ä»¶
            drawComponents();
            
            // æ›´æ–°å’Œç»˜åˆ¶ç²’å­
            updateParticles();
            
            // ç»˜åˆ¶æ ‡é¢˜
            drawTitles();
            
            // æ›´æ–°æ•°æ®é¢æ¿
            updateDataPanel();
            
            // æ›´æ–°æ—¶é—´
            time += 0.016 * animationSpeed;
            
            // ç»§ç»­åŠ¨ç”»å¾ªç¯
            if (isPlaying) {
                animationId = requestAnimationFrame(animate);
            }
        }
        
        // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
        function drawGrid() {
            ctx.save();
            ctx.strokeStyle = 'rgba(100, 150, 200, 0.1)';
            ctx.lineWidth = 1;
            
            // å‚ç›´çº¿
            for (let x = 0; x < canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // æ°´å¹³çº¿
            for (let y = 0; y < canvas.height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            ctx.restore();
        }
        
        // æ£€æŸ¥ç‚¹å‡»ç»„ä»¶
        function checkClick(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // æ£€æŸ¥å…‰åˆä½œç”¨ç»„ä»¶
            if (viewMode === 0 || viewMode === 1) {
                for (const comp of components.photosynthesis) {
                    if (x >= comp.x && x <= comp.x + comp.width &&
                        y >= comp.y && y <= comp.y + comp.height) {
                        showHighlight(comp.name, comp.desc, x, y);
                        return;
                    }
                }
            }
            
            // æ£€æŸ¥ç»†èƒå‘¼å¸ç»„ä»¶
            if (viewMode === 0 || viewMode === 2) {
                for (const comp of components.respiration) {
                    if (x >= comp.x && x <= comp.x + comp.width &&
                        y >= comp.y && y <= comp.y + comp.height) {
                        showHighlight(comp.name, comp.desc, x, y);
                        return;
                    }
                }
            }
            
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹éšè—é«˜äº®æ¡†
            highlightBox.style.display = 'none';
        }
        
        // æ˜¾ç¤ºé«˜äº®ä¿¡æ¯æ¡†
        function showHighlight(title, desc, x, y) {
            highlightTitle.textContent = title;
            highlightDesc.textContent = desc;
            
            // å®šä½ä¿¡æ¯æ¡†
            let boxX = x + 20;
            let boxY = y + 20;
            
            // ç¡®ä¿ä¸è¶…å‡ºç”»å¸ƒè¾¹ç•Œ
            if (boxX + 400 > canvas.width) {
                boxX = x - 420;
            }
            if (boxY + 200 > canvas.height) {
                boxY = y - 220;
            }
            
            highlightBox.style.left = boxX + 'px';
            highlightBox.style.top = boxY + 'px';
            highlightBox.style.display = 'block';
        }
        
        // é‡ç½®åŠ¨ç”»
        function resetAnimation() {
            time = 0;
            animationData = {
                photoProtons: 0,
                respProtons: 0,
                photoATPCount: 0,
                respATPCount: 0,
                oxygenRate: 0,
                co2Rate: 0
            };
            initParticles();
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // æ’­æ”¾æ§åˆ¶
            document.getElementById('playBtn').addEventListener('click', () => {
                isPlaying = true;
                if (!animationId) {
                    animate();
                }
            });
            
            document.getElementById('pauseBtn').addEventListener('click', () => {
                isPlaying = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            });
            
            document.getElementById('resetBtn').addEventListener('click', () => {
                resetAnimation();
            });
            
            // è§†å›¾åˆ‡æ¢
            document.getElementById('viewCompare').addEventListener('click', () => {
                viewMode = 0;
                updateViewButtons();
            });
            
            document.getElementById('viewPhotosynthesis').addEventListener('click', () => {
                viewMode = 1;
                updateViewButtons();
            });
            
            document.getElementById('viewRespiration').addEventListener('click', () => {
                viewMode = 2;
                updateViewButtons();
            });
            
            // äº¤äº’åŠŸèƒ½
            document.getElementById('toggleLabels').addEventListener('click', function() {
                showLabels = !showLabels;
                this.textContent = showLabels ? 'éšè—æ ‡ç­¾' : 'æ˜¾ç¤ºæ ‡ç­¾';
            });
            
            document.getElementById('trackElectrons').addEventListener('click', function() {
                trackElectrons = !trackElectrons;
                trackProtons = false; // ç¡®ä¿åªæœ‰ä¸€ä¸ªè¿½è¸ªæ¨¡å¼
                this.textContent = trackElectrons ? 'åœæ­¢è¿½è¸ª' : 'è¿½è¸ªç”µå­';
                document.getElementById('trackProtons').textContent = 'è¿½è¸ªè´¨å­';
            });
            
            document.getElementById('trackProtons').addEventListener('click', function() {
                trackProtons = !trackProtons;
                trackElectrons = false; // ç¡®ä¿åªæœ‰ä¸€ä¸ªè¿½è¸ªæ¨¡å¼
                this.textContent = trackProtons ? 'åœæ­¢è¿½è¸ª' : 'è¿½è¸ªè´¨å­';
                document.getElementById('trackElectrons').textContent = 'è¿½è¸ªç”µå­';
            });
            
            // é€Ÿåº¦æ»‘å—
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            
            speedSlider.addEventListener('input', function() {
                animationSpeed = parseFloat(this.value);
                speedValue.textContent = animationSpeed.toFixed(1) + 'x';
            });
            
            // é«˜äº®æ¡†å…³é—­æŒ‰é’®
            document.getElementById('closeHighlight').addEventListener('click', () => {
                highlightBox.style.display = 'none';
            });
            
            // ç”»å¸ƒç‚¹å‡»äº‹ä»¶
            canvas.addEventListener('click', checkClick);
            
            // çª—å£è°ƒæ•´å¤§å°
            window.addEventListener('resize', function() {
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥é‡æ–°è®¡ç®—ç”»å¸ƒå¤§å°
                // ä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¿æŒå›ºå®šå¤§å°
            });
        }
        
        // æ›´æ–°è§†å›¾æŒ‰é’®çŠ¶æ€
        function updateViewButtons() {
            const buttons = ['viewCompare', 'viewPhotosynthesis', 'viewRespiration'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                btn.classList.remove('btn-active');
            });
            
            if (viewMode === 0) {
                document.getElementById('viewCompare').classList.add('btn-active');
            } else if (viewMode === 1) {
                document.getElementById('viewPhotosynthesis').classList.add('btn-active');
            } else {
                document.getElementById('viewRespiration').classList.add('btn-active');
            }
        }
        
        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            // åˆå§‹åŒ–ç²’å­
            initParticles();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
            initEventListeners();
            
            // å¼€å§‹åŠ¨ç”»
            animate();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>