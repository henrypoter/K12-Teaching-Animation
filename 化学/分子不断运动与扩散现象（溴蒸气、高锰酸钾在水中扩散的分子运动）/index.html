<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†å­è¿åŠ¨ä¸æ‰©æ•£ç°è±¡æ•™å­¦åŠ¨ç”»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 25px;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeff5;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 2.4rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #2c3e50, #4a6491);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .animation-area {
            flex: 1;
            min-width: 300px;
            background-color: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .canvas-container {
            width: 100%;
            height: 500px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f0f8ff;
            border: 1px solid #dbe7f3;
        }
        
        #mainCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .macro-overlay {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #d1e3ff;
            transition: opacity 0.3s ease;
        }
        
        .controls-panel {
            flex: 0 0 320px;
            background-color: #f8fafc;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #eaeff5;
        }
        
        .control-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeff5;
        }
        
        .control-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        h2 {
            color: #34495e;
            font-size: 1.4rem;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
        }
        
        h2 i {
            margin-right: 10px;
            color: #4a6491;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background-color: #4a6491;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 120px;
            font-size: 1rem;
        }
        
        button:hover {
            background-color: #3a5379;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button.primary {
            background-color: #3498db;
        }
        
        button.primary:hover {
            background-color: #2980b9;
        }
        
        button.secondary {
            background-color: #2ecc71;
        }
        
        button.secondary:hover {
            background-color: #27ae60;
        }
        
        button.warning {
            background-color: #e74c3c;
        }
        
        button.warning:hover {
            background-color: #c0392b;
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .slider-value {
            color: #3498db;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #dfe7f2;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .checkbox-item input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .checkbox-item label {
            cursor: pointer;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .info-panel {
            background-color: #f0f8ff;
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            border-left: 5px solid #3498db;
        }
        
        .info-panel h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .info-content {
            color: #5a6c7d;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        
        .highlight {
            background-color: rgba(255, 215, 0, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            background-color: #f8fafc;
            padding: 12px 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.95rem;
            color: #5a6c7d;
            border: 1px solid #eaeff5;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
        }
        
        .status-value {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .controls-panel {
                flex: 1;
            }
            
            .canvas-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>åˆ†å­è¿åŠ¨ä¸æ‰©æ•£ç°è±¡</h1>
            <p class="subtitle">é€šè¿‡å¯è§†åŒ–å¾®è§‚ç²’å­è¿åŠ¨ï¼Œç†è§£æº´è’¸æ°”æ‰©æ•£å’Œé«˜é”°é…¸é’¾åœ¨æ°´ä¸­æ‰©æ•£çš„å®è§‚ç°è±¡ã€‚æ¢ç´¢æ¸©åº¦ã€åˆ†å­å¤§å°å¯¹æ‰©æ•£é€Ÿç‡çš„å½±å“ã€‚</p>
        </header>
        
        <div class="main-content">
            <div class="animation-area">
                <div class="canvas-container">
                    <canvas id="mainCanvas"></canvas>
                    <div class="macro-overlay" id="macroOverlay">
                        <div id="macroDescription">å®è§‚ç°è±¡ï¼šæº´è’¸æ°”ï¼ˆçº¢æ£•è‰²ï¼‰ä»å³ä¾§é›†æ°”ç“¶å‘å·¦ä¾§ç©ºæ°”ç“¶ä¸­æ‰©æ•£ï¼Œæœ€ç»ˆä¸¤ç“¶é¢œè‰²å‡åŒ€ã€‚</div>
                    </div>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #8B4513;"></div>
                        <span>æº´åˆ†å­</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #D3D3D3;"></div>
                        <span>ç©ºæ°”åˆ†å­</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #8A2BE2;"></div>
                        <span>é«˜é”°é…¸é’¾ç¦»å­</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #87CEEB; opacity: 0.3;"></div>
                        <span>æ°´åˆ†å­</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #FFD700;"></div>
                        <span>è¢«è¿½è¸ªç²’å­</span>
                    </div>
                </div>
                
                <div class="status-bar">
                    <div class="status-item">
                        <span>æ—¶é—´è¿›åº¦</span>
                        <span class="status-value" id="timeProgress">0%</span>
                    </div>
                    <div class="status-item">
                        <span>å·¦ä¾§æµ“åº¦</span>
                        <span class="status-value" id="leftConcentration">100%</span>
                    </div>
                    <div class="status-item">
                        <span>å³ä¾§æµ“åº¦</span>
                        <span class="status-value" id="rightConcentration">0%</span>
                    </div>
                    <div class="status-item">
                        <span>ç²’å­æ€»æ•°</span>
                        <span class="status-value" id="particleCount">200</span>
                    </div>
                </div>
            </div>
            
            <div class="controls-panel">
                <div class="control-section">
                    <h2><i>ğŸ§ª</i> å®éªŒåœºæ™¯</h2>
                    <div class="button-group">
                        <button id="sceneBromine" class="primary">æº´è’¸æ°”æ‰©æ•£</button>
                        <button id="scenePermanganate">é«˜é”°é…¸é’¾æ‰©æ•£</button>
                    </div>
                    
                    <div class="button-group">
                        <button id="viewMicro">å¾®è§‚è§†å›¾</button>
                        <button id="viewMacro" class="secondary">å®è§‚è§†å›¾</button>
                        <button id="viewCompare">å¯¹æ¯”è§†å›¾</button>
                    </div>
                </div>
                
                <div class="control-section">
                    <h2><i>â¯ï¸</i> åŠ¨ç”»æ§åˆ¶</h2>
                    <div class="button-group">
                        <button id="playBtn" class="primary">â–¶ æ’­æ”¾</button>
                        <button id="pauseBtn">â¸ æš‚åœ</button>
                        <button id="resetBtn" class="warning">â†º é‡ç½®</button>
                    </div>
                </div>
                
                <div class="control-section">
                    <h2><i>âš™ï¸</i> å‚æ•°è°ƒèŠ‚</h2>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>æ¸©åº¦</span>
                            <span class="slider-value" id="tempValue">25Â°C</span>
                        </div>
                        <input type="range" id="tempSlider" min="0" max="100" value="25">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>ç²’å­å¤§å°ï¼ˆè´¨é‡ï¼‰</span>
                            <span class="slider-value" id="sizeValue">ä¸­ç­‰</span>
                        </div>
                        <input type="range" id="sizeSlider" min="1" max="10" value="5">
                    </div>
                </div>
                
                <div class="control-section">
                    <h2><i>ğŸ”</i> æ˜¾ç¤ºé€‰é¡¹</h2>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="showTraces" checked>
                            <label for="showTraces">æ˜¾ç¤ºç²’å­è¿åŠ¨è½¨è¿¹</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="showConcentration">
                            <label for="showConcentration">æ˜¾ç¤ºæµ“åº¦åŒºåŸŸ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="trackParticles">
                            <label for="trackParticles">è·Ÿè¸ªéšæœºç²’å­</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="showVelocity">
                            <label for="showVelocity">æ˜¾ç¤ºé€Ÿåº¦æŒ‡ç¤º</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <h3>æ•™å­¦æç¤º</h3>
            <div class="info-content" id="teachingTip">
                <p><span class="highlight">åˆ†å­ä¸æ–­è¿åŠ¨</span>ï¼šæ‰€æœ‰ç‰©è´¨çš„åˆ†å­éƒ½åœ¨æ°¸ä¸åœæ¯åœ°åšæ— è§„åˆ™è¿åŠ¨ã€‚è§‚å¯Ÿç”»å¸ƒä¸­ç²’å­çš„éšæœºè¿åŠ¨è·¯å¾„ã€‚</p>
                <p><span class="highlight">æ‰©æ•£ç°è±¡</span>ï¼šä¸åŒç‰©è´¨ç›¸äº’æ¥è§¦æ—¶å½¼æ­¤è¿›å…¥å¯¹æ–¹çš„ç°è±¡ï¼Œæ˜¯åˆ†å­è¿åŠ¨çš„å®è§‚è¡¨ç°ã€‚æ³¨æ„è§‚å¯Ÿé¢œè‰²å¦‚ä½•ä»é«˜æµ“åº¦åŒºåŸŸå‘ä½æµ“åº¦åŒºåŸŸé€æ¸æ··åˆã€‚</p>
                <p>å°è¯•æé«˜æ¸©åº¦æ»‘å—ï¼Œè§‚å¯Ÿåˆ†å­è¿åŠ¨é€Ÿåº¦åŠ å¿«ï¼Œæ‰©æ•£è¿‡ç¨‹ä¹Ÿéšä¹‹åŠ é€Ÿã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // è·å–Canvaså’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®Canvaså°ºå¯¸
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }
        
        // åˆå§‹è°ƒæ•´å°ºå¯¸
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // åŠ¨ç”»çŠ¶æ€
        let animationId = null;
        let isPlaying = false;
        let currentScene = 'bromine'; // 'bromine' æˆ– 'permanganate'
        let currentView = 'compare'; // 'micro', 'macro', 'compare'
        let animationTime = 0;
        const maxAnimationTime = 300; // åŠ¨ç”»æ€»æ—¶é—´ï¼ˆç§’æ¨¡æ‹Ÿï¼‰
        
        // ç²’å­ç³»ç»Ÿ
        let particles = [];
        const particleCount = 200;
        let trackedParticles = [];
        
        // é¢œè‰²å®šä¹‰
        const colors = {
            bromine: '#8B4513',      // æº´åˆ†å­ - çº¢æ£•è‰²
            air: '#D3D3D3',          // ç©ºæ°”åˆ†å­ - æµ…ç°è‰²
            permanganate: '#8A2BE2', // é«˜é”°é…¸é’¾ç¦»å­ - ç´«çº¢è‰²
            water: '#87CEEB',        // æ°´åˆ†å­ - æµ…è“è‰²
            tracked: '#FFD700',      // è¢«è¿½è¸ªç²’å­ - äº®é»„è‰²
            trace: 'rgba(255, 215, 0, 0.2)', // è½¨è¿¹é¢œè‰²
            background: '#f0f8ff'    // èƒŒæ™¯è‰²
        };
        
        // å‚æ•°
        let temperature = 25; // æ¸©åº¦å€¼ (0-100)
        let particleSizeFactor = 5; // ç²’å­å¤§å°å› å­ (1-10)
        let showTraces = true;
        let showConcentration = false;
        let trackParticles = false;
        let showVelocity = false;
        
        // ç²’å­ç±»
        class Particle {
            constructor(type, x, y, vx, vy, radius, color) {
                this.type = type; // 'bromine', 'air', 'permanganate', 'water'
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.radius = radius;
                this.color = color;
                this.originalColor = color;
                this.isTracked = false;
                this.trace = [];
                this.maxTraceLength = 20;
            }
            
            update(deltaTime, temperatureFactor) {
                // æ ¹æ®æ¸©åº¦è°ƒæ•´é€Ÿåº¦
                const speedFactor = 1 + (temperatureFactor - 1) * 0.5;
                this.vx *= speedFactor;
                this.vy *= speedFactor;
                
                // æ›´æ–°ä½ç½®
                this.x += this.vx * deltaTime;
                this.y += this.vy * deltaTime;
                
                // è¾¹ç•Œç¢°æ’
                const margin = 5;
                if (this.x < margin || this.x > canvas.width - margin) {
                    this.vx = -this.vx;
                    this.x = Math.max(margin, Math.min(canvas.width - margin, this.x));
                }
                if (this.y < margin || this.y > canvas.height - margin) {
                    this.vy = -this.vy;
                    this.y = Math.max(margin, Math.min(canvas.height - margin, this.y));
                }
                
                // æ·»åŠ è½¨è¿¹ç‚¹
                if (this.isTracked && showTraces) {
                    this.trace.push({x: this.x, y: this.y});
                    if (this.trace.length > this.maxTraceLength) {
                        this.trace.shift();
                    }
                }
            }
            
            draw(ctx) {
                // ç»˜åˆ¶è½¨è¿¹
                if (this.isTracked && showTraces && this.trace.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(this.trace[0].x, this.trace[0].y);
                    for (let i = 1; i < this.trace.length; i++) {
                        ctx.lineTo(this.trace[i].x, this.trace[i].y);
                    }
                    ctx.strokeStyle = colors.trace;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                
                // ç»˜åˆ¶ç²’å­
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                
                // æ ¹æ®è§†å›¾æ¨¡å¼è°ƒæ•´é¢œè‰²é€æ˜åº¦
                let drawColor = this.color;
                if (currentView === 'macro' && (this.type === 'air' || this.type === 'water')) {
                    // åœ¨å®è§‚è§†å›¾ä¸­ï¼Œç©ºæ°”å’Œæ°´åˆ†å­å‡ ä¹é€æ˜
                    drawColor = this.type === 'air' ? 'rgba(211, 211, 211, 0.1)' : 'rgba(135, 206, 235, 0.05)';
                }
                
                ctx.fillStyle = drawColor;
                ctx.fill();
                
                // å¦‚æœè¢«è¿½è¸ªï¼Œæ·»åŠ é«˜äº®ç¯
                if (this.isTracked) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius + 3, 0, Math.PI * 2);
                    ctx.strokeStyle = colors.tracked;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                
                // æ˜¾ç¤ºé€Ÿåº¦æŒ‡ç¤º
                if (showVelocity) {
                    const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                    const alpha = Math.min(0.5, speed / 10);
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x + this.vx * 5, this.y + this.vy * 5);
                    ctx.strokeStyle = `rgba(255, 100, 100, ${alpha})`;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }
        
        // åˆå§‹åŒ–ç²’å­ç³»ç»Ÿ
        function initParticles() {
            particles = [];
            trackedParticles = [];
            
            const centerX = canvas.width / 2;
            const isBromineScene = currentScene === 'bromine';
            
            // æ ¹æ®åœºæ™¯åˆ›å»ºç²’å­
            if (isBromineScene) {
                // æº´è’¸æ°”æ‰©æ•£åœºæ™¯ï¼šå·¦ä¾§ç©ºæ°”ï¼Œå³ä¾§æº´è’¸æ°”
                for (let i = 0; i < particleCount; i++) {
                    // ç©ºæ°”åˆ†å­ (å·¦ä¾§)
                    if (i < particleCount * 0.4) {
                        const x = Math.random() * centerX * 0.8;
                        const y = Math.random() * canvas.height * 0.8 + canvas.height * 0.1;
                        const speed = 0.5 + Math.random() * 1;
                        const angle = Math.random() * Math.PI * 2;
                        const vx = Math.cos(angle) * speed;
                        const vy = Math.sin(angle) * speed;
                        const radius = 3 + Math.random() * 2;
                        
                        particles.push(new Particle(
                            'air', x, y, vx, vy, radius, colors.air
                        ));
                    }
                    // æº´åˆ†å­ (å³ä¾§)
                    else {
                        const x = centerX + Math.random() * centerX * 0.8;
                        const y = Math.random() * canvas.height * 0.8 + canvas.height * 0.1;
                        const speed = 0.3 + Math.random() * 0.8;
                        const angle = Math.random() * Math.PI * 2;
                        const vx = Math.cos(angle) * speed;
                        const vy = Math.sin(angle) * speed;
                        const radius = 4 + Math.random() * 3;
                        
                        particles.push(new Particle(
                            'bromine', x, y, vx, vy, radius, colors.bromine
                        ));
                    }
                }
            } else {
                // é«˜é”°é…¸é’¾æ‰©æ•£åœºæ™¯ï¼šæ°´ä¸­é«˜é”°é…¸é’¾æ‰©æ•£
                for (let i = 0; i < particleCount; i++) {
                    // æ°´åˆ†å­ (å…¨åŒºåŸŸ)
                    if (i < particleCount * 0.7) {
                        const x = Math.random() * canvas.width * 0.9 + canvas.width * 0.05;
                        const y = Math.random() * canvas.height * 0.9 + canvas.height * 0.05;
                        const speed = 0.2 + Math.random() * 0.5;
                        const angle = Math.random() * Math.PI * 2;
                        const vx = Math.cos(angle) * speed;
                        const vy = Math.sin(angle) * speed;
                        const radius = 2 + Math.random() * 2;
                        
                        particles.push(new Particle(
                            'water', x, y, vx, vy, radius, colors.water
                        ));
                    }
                    // é«˜é”°é…¸é’¾ç¦»å­ (åˆå§‹é›†ä¸­åœ¨å³ä¾§)
                    else {
                        const x = centerX + Math.random() * centerX * 0.7;
                        const y = Math.random() * canvas.height * 0.8 + canvas.height * 0.1;
                        const speed = 0.4 + Math.random() * 1;
                        const angle = Math.random() * Math.PI * 2;
                        const vx = Math.cos(angle) * speed;
                        const vy = Math.sin(angle) * speed;
                        const radius = 3 + Math.random() * 2;
                        
                        particles.push(new Particle(
                            'permanganate', x, y, vx, vy, radius, colors.permanganate
                        ));
                    }
                }
            }
            
            // éšæœºé€‰æ‹©å‡ ä¸ªç²’å­è¿›è¡Œè¿½è¸ª
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * particles.length);
                particles[randomIndex].isTracked = true;
                trackedParticles.push(particles[randomIndex]);
            }
            
            // æ ¹æ®ç²’å­å¤§å°å› å­è°ƒæ•´åŠå¾„
            updateParticleSizes();
        }
        
        // æ›´æ–°ç²’å­å¤§å°
        function updateParticleSizes() {
            const sizeMultiplier = particleSizeFactor / 5; // åŸºå‡†å€¼ä¸º5
            
            particles.forEach(particle => {
                let baseRadius;
                switch(particle.type) {
                    case 'bromine': baseRadius = 4; break;
                    case 'air': baseRadius = 3; break;
                    case 'permanganate': baseRadius = 3; break;
                    case 'water': baseRadius = 2; break;
                    default: baseRadius = 3;
                }
                particle.radius = baseRadius * sizeMultiplier;
            });
        }
        
        // ç»˜åˆ¶å®è§‚å®éªŒå›¾ç¤º
        function drawMacroExperiment() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const isBromineScene = currentScene === 'bromine';
            
            if (isBromineScene) {
                // ç»˜åˆ¶æº´è’¸æ°”æ‰©æ•£å®éªŒè£…ç½®
                const bottleWidth = 120;
                const bottleHeight = 180;
                const bottleY = centerY - bottleHeight / 2;
                
                // å·¦ä¾§ç©ºæ°”ç“¶
                ctx.beginPath();
                ctx.rect(centerX - bottleWidth - 150, bottleY, bottleWidth, bottleHeight);
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // å³ä¾§æº´è’¸æ°”ç“¶
                ctx.beginPath();
                ctx.rect(centerX + 50, bottleY, bottleWidth, bottleHeight);
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // è¿æ¥ç®¡
                ctx.beginPath();
                ctx.rect(centerX - 30, centerY - 10, 60, 20);
                ctx.fillStyle = '#bdc3c7';
                ctx.fill();
                ctx.strokeStyle = '#7f8c8d';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // æº´è’¸æ°”é¢œè‰²æ‰©æ•£æ•ˆæœ
                const diffusionProgress = Math.min(1, animationTime / maxAnimationTime);
                
                // å·¦ä¾§ç“¶é¢œè‰²ï¼ˆé€æ¸å˜æ·±ï¼‰
                ctx.fillStyle = `rgba(139, 69, 19, ${0.1 + diffusionProgress * 0.4})`;
                ctx.fillRect(centerX - bottleWidth - 150, bottleY, bottleWidth, bottleHeight);
                
                // å³ä¾§ç“¶é¢œè‰²ï¼ˆé€æ¸å˜æµ…ï¼‰
                ctx.fillStyle = `rgba(139, 69, 19, ${0.8 - diffusionProgress * 0.4})`;
                ctx.fillRect(centerX + 50, bottleY, bottleWidth, bottleHeight);
                
                // æ ‡ç­¾
                ctx.fillStyle = '#2c3e50';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ç©ºæ°”', centerX - bottleWidth - 150 + bottleWidth/2, bottleY + bottleHeight + 25);
                ctx.fillText('æº´è’¸æ°”', centerX + 50 + bottleWidth/2, bottleY + bottleHeight + 25);
                
            } else {
                // ç»˜åˆ¶é«˜é”°é…¸é’¾åœ¨æ°´ä¸­æ‰©æ•£å®éªŒ
                const beakerWidth = 200;
                const beakerHeight = 220;
                const beakerX = centerX - beakerWidth / 2;
                const beakerY = centerY - beakerHeight / 2;
                
                // çƒ§æ¯è½®å»“
                ctx.beginPath();
                ctx.moveTo(beakerX, beakerY + beakerHeight);
                ctx.lineTo(beakerX, beakerY + 30);
                ctx.quadraticCurveTo(beakerX, beakerY, beakerX + 20, beakerY);
                ctx.lineTo(beakerX + beakerWidth - 20, beakerY);
                ctx.quadraticCurveTo(beakerX + beakerWidth, beakerY, beakerX + beakerWidth, beakerY + 30);
                ctx.lineTo(beakerX + beakerWidth, beakerY + beakerHeight);
                ctx.lineTo(beakerX, beakerY + beakerHeight);
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // æ°´
                const waterHeight = beakerHeight * 0.8;
                ctx.fillStyle = 'rgba(135, 206, 235, 0.3)';
                ctx.fillRect(beakerX, beakerY + beakerHeight - waterHeight, beakerWidth, waterHeight);
                
                // é«˜é”°é…¸é’¾æ‰©æ•£æ•ˆæœ
                const diffusionProgress = Math.min(1, animationTime / maxAnimationTime);
                const gradient = ctx.createLinearGradient(beakerX, 0, beakerX + beakerWidth, 0);
                
                // åˆ›å»ºä»ç´«è‰²åˆ°æ— è‰²çš„æ¸å˜æ¥æ¨¡æ‹Ÿæ‰©æ•£
                gradient.addColorStop(0, `rgba(138, 43, 226, ${0.9 - diffusionProgress * 0.4})`);
                gradient.addColorStop(0.3, `rgba(138, 43, 226, ${0.7 - diffusionProgress * 0.35})`);
                gradient.addColorStop(0.6, `rgba(138, 43, 226, ${0.4 - diffusionProgress * 0.3})`);
                gradient.addColorStop(1, `rgba(138, 43, 226, ${0.1 - diffusionProgress * 0.05})`);
                
                ctx.fillStyle = gradient;
                ctx.fillRect(beakerX, beakerY + beakerHeight - waterHeight, beakerWidth, waterHeight);
                
                // æ ‡ç­¾
                ctx.fillStyle = '#2c3e50';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('é«˜é”°é…¸é’¾æº¶æ¶²', centerX, beakerY + beakerHeight + 25);
            }
        }
        
        // ç»˜åˆ¶æµ“åº¦åŒºåŸŸ
        function drawConcentrationAreas() {
            if (!showConcentration) return;
            
            const centerX = canvas.width / 2;
            const isBromineScene = currentScene === 'bromine';
            
            // è®¡ç®—å·¦ä¾§å’Œå³ä¾§çš„æº´/é«˜é”°é…¸é’¾ç²’å­æ•°é‡
            let leftCount = 0, rightCount = 0;
            let leftTarget = 0, rightTarget = 0;
            
            particles.forEach(p => {
                if (p.type === (isBromineScene ? 'bromine' : 'permanganate')) {
                    if (p.x < centerX) leftCount++;
                    else rightCount++;
                }
                if (p.x < centerX) leftTarget++;
                else rightTarget++;
            });
            
            const leftConcentration = leftTarget > 0 ? leftCount / leftTarget : 0;
            const rightConcentration = rightTarget > 0 ? rightCount / rightTarget : 0;
            
            // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
            document.getElementById('leftConcentration').textContent = `${Math.round(leftConcentration * 100)}%`;
            document.getElementById('rightConcentration').textContent = `${Math.round(rightConcentration * 100)}%`;
            
            // ç»˜åˆ¶å·¦ä¾§æµ“åº¦åŒºåŸŸ
            ctx.fillStyle = isBromineScene ? 
                `rgba(139, 69, 19, ${0.1 + leftConcentration * 0.4})` : 
                `rgba(138, 43, 226, ${0.1 + leftConcentration * 0.4})`;
            ctx.fillRect(0, 0, centerX, canvas.height);
            
            // ç»˜åˆ¶å³ä¾§æµ“åº¦åŒºåŸŸ
            ctx.fillStyle = isBromineScene ? 
                `rgba(139, 69, 19, ${0.1 + rightConcentration * 0.4})` : 
                `rgba(138, 43, 226, ${0.1 + rightConcentration * 0.4})`;
            ctx.fillRect(centerX, 0, centerX, canvas.height);
            
            // ç»˜åˆ¶åˆ†ç•Œçº¿
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        // ä¸»åŠ¨ç”»å¾ªç¯
        function animate(timestamp) {
            if (!lastTimestamp) lastTimestamp = timestamp;
            const deltaTime = (timestamp - lastTimestamp) / 16; // æ ‡å‡†åŒ–æ—¶é—´å¢é‡
            lastTimestamp = timestamp;
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶èƒŒæ™¯
            ctx.fillStyle = colors.background;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // æ ¹æ®è§†å›¾æ¨¡å¼ç»˜åˆ¶
            if (currentView === 'macro') {
                // åªæ˜¾ç¤ºå®è§‚å®éªŒ
                drawMacroExperiment();
            } else {
                // æ˜¾ç¤ºå¾®è§‚ç²’å­æˆ–å¯¹æ¯”è§†å›¾
                
                // ç»˜åˆ¶æµ“åº¦åŒºåŸŸï¼ˆå¦‚æœå¯ç”¨ï¼‰
                drawConcentrationAreas();
                
                // æ›´æ–°å’Œç»˜åˆ¶æ‰€æœ‰ç²’å­
                const temperatureFactor = 1 + (temperature - 25) / 75; // æ¸©åº¦å½±å“å› å­
                
                particles.forEach(particle => {
                    particle.update(deltaTime, temperatureFactor);
                    particle.draw(ctx);
                });
                
                // å¦‚æœæ˜¯å¯¹æ¯”è§†å›¾ï¼ŒåŒæ—¶ç»˜åˆ¶å®è§‚å®éªŒ
                if (currentView === 'compare') {
                    // åœ¨åŠé€æ˜å±‚ä¸Šç»˜åˆ¶å®è§‚å®éªŒ
                    ctx.save();
                    ctx.globalAlpha = 0.7;
                    drawMacroExperiment();
                    ctx.restore();
                }
            }
            
            // æ›´æ–°åŠ¨ç”»æ—¶é—´
            if (isPlaying) {
                animationTime += deltaTime * 0.5;
                if (animationTime > maxAnimationTime) {
                    animationTime = maxAnimationTime;
                }
                
                // æ›´æ–°è¿›åº¦æ˜¾ç¤º
                const progressPercent = Math.round((animationTime / maxAnimationTime) * 100);
                document.getElementById('timeProgress').textContent = `${progressPercent}%`;
            }
            
            // ç»§ç»­åŠ¨ç”»å¾ªç¯
            if (isPlaying) {
                animationId = requestAnimationFrame(animate);
            }
        }
        
        let lastTimestamp = 0;
        
        // å¼€å§‹åŠ¨ç”»
        function startAnimation() {
            if (!isPlaying) {
                isPlaying = true;
                lastTimestamp = 0;
                animationId = requestAnimationFrame(animate);
                updatePlayButton();
            }
        }
        
        // æš‚åœåŠ¨ç”»
        function pauseAnimation() {
            isPlaying = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            updatePlayButton();
        }
        
        // é‡ç½®åŠ¨ç”»
        function resetAnimation() {
            pauseAnimation();
            animationTime = 0;
            initParticles();
            document.getElementById('timeProgress').textContent = '0
<!--æ£€æµ‹åˆ°ä»£ç æˆªæ–­ï¼Œè‡ªåŠ¨ç»­å†™ä¸­...-->
%';
            document.getElementById('leftConcentration').textContent = '100%';
            document.getElementById('rightConcentration').textContent = '0%';
            
            // æ›´æ–°æ•™å­¦æç¤º
            updateTeachingTip();
            
            // ç«‹å³ç»˜åˆ¶ä¸€å¸§
            lastTimestamp = 0;
            animate(performance.now());
        }
        
        // æ›´æ–°æ’­æ”¾æŒ‰é’®çŠ¶æ€
        function updatePlayButton() {
            const playBtn = document.getElementById('playBtn');
            if (isPlaying) {
                playBtn.innerHTML = 'â¸ æš‚åœ';
                playBtn.classList.add('warning');
                playBtn.classList.remove('primary');
            } else {
                playBtn.innerHTML = 'â–¶ æ’­æ”¾';
                playBtn.classList.remove('warning');
                playBtn.classList.add('primary');
            }
        }
        
        // æ›´æ–°æ•™å­¦æç¤º
        function updateTeachingTip() {
            const tipElement = document.getElementById('teachingTip');
            const macroDescription = document.getElementById('macroDescription');
            
            if (currentScene === 'bromine') {
                macroDescription.textContent = 'å®è§‚ç°è±¡ï¼šæº´è’¸æ°”ï¼ˆçº¢æ£•è‰²ï¼‰ä»å³ä¾§é›†æ°”ç“¶å‘å·¦ä¾§ç©ºæ°”ç“¶ä¸­æ‰©æ•£ï¼Œæœ€ç»ˆä¸¤ç“¶é¢œè‰²å‡åŒ€ã€‚';
                
                tipElement.innerHTML = `
                    <p><span class="highlight">åˆ†å­ä¸æ–­è¿åŠ¨</span>ï¼šæ‰€æœ‰ç‰©è´¨çš„åˆ†å­éƒ½åœ¨æ°¸ä¸åœæ¯åœ°åšæ— è§„åˆ™è¿åŠ¨ã€‚è§‚å¯Ÿç”»å¸ƒä¸­ç²’å­çš„éšæœºè¿åŠ¨è·¯å¾„ã€‚</p>
                    <p><span class="highlight">æ‰©æ•£ç°è±¡</span>ï¼šä¸åŒç‰©è´¨ç›¸äº’æ¥è§¦æ—¶å½¼æ­¤è¿›å…¥å¯¹æ–¹çš„ç°è±¡ï¼Œæ˜¯åˆ†å­è¿åŠ¨çš„å®è§‚è¡¨ç°ã€‚æ³¨æ„è§‚å¯Ÿé¢œè‰²å¦‚ä½•ä»é«˜æµ“åº¦åŒºåŸŸå‘ä½æµ“åº¦åŒºåŸŸé€æ¸æ··åˆã€‚</p>
                    <p><span class="highlight">å½±å“å› ç´ </span>ï¼šå°è¯•æé«˜æ¸©åº¦æ»‘å—ï¼Œè§‚å¯Ÿåˆ†å­è¿åŠ¨é€Ÿåº¦åŠ å¿«ï¼Œæ‰©æ•£è¿‡ç¨‹ä¹Ÿéšä¹‹åŠ é€Ÿã€‚è°ƒæ•´ç²’å­å¤§å°æ¨¡æ‹Ÿä¸åŒåˆ†å­è´¨é‡çš„å½±å“ã€‚</p>
                `;
            } else {
                macroDescription.textContent = 'å®è§‚ç°è±¡ï¼šé«˜é”°é…¸é’¾æ™¶ä½“åœ¨æ°´ä¸­æº¶è§£ï¼Œç´«çº¢è‰²ä»æ™¶ä½“å‘¨å›´é€æ¸å‘æ•´ä¸ªçƒ§æ¯æ‰©æ•£ï¼Œæœ€ç»ˆæº¶æ¶²é¢œè‰²å‡åŒ€ã€‚';
                
                tipElement.innerHTML = `
                    <p><span class="highlight">æº¶è§£ä¸æ‰©æ•£</span>ï¼šé«˜é”°é…¸é’¾æ™¶ä½“ä¸­çš„ç¦»å­è¿›å…¥æ°´ä¸­ï¼Œé€šè¿‡æ°´åˆ†å­çš„é—´éš™æ‰©æ•£åˆ°æ•´ä¸ªæº¶æ¶²ã€‚</p>
                    <p><span class="highlight">å¸ƒæœ—è¿åŠ¨</span>ï¼šæ°´åˆ†å­å’Œæº¶è´¨ç¦»å­éƒ½åœ¨åšæ— è§„åˆ™è¿åŠ¨ï¼Œç›¸äº’ç¢°æ’å¯¼è‡´æ‰©æ•£å‘ç”Ÿã€‚</p>
                    <p><span class="highlight">æ¸©åº¦çš„å½±å“</span>ï¼šæé«˜æ¸©åº¦ä¼šä½¿æ°´åˆ†å­è¿åŠ¨åŠ å‰§ï¼ŒåŠ é€Ÿé«˜é”°é…¸é’¾ç¦»å­çš„æ‰©æ•£è¿‡ç¨‹ã€‚</p>
                    <p>æ³¨æ„è§‚å¯Ÿï¼šåŠé€æ˜çš„è“è‰²å°ç‚¹ä»£è¡¨æ°´åˆ†å­ï¼Œç´«çº¢è‰²ç‚¹ä»£è¡¨é«˜é”°é…¸é’¾ç¦»å­ã€‚</p>
                `;
            }
        }
        
        // åˆ‡æ¢åœºæ™¯
        function switchScene(scene) {
            currentScene = scene;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('sceneBromine').classList.toggle('primary', scene === 'bromine');
            document.getElementById('scenePermanganate').classList.toggle('primary', scene === 'permanganate');
            
            // æ›´æ–°ç²’å­æ•°é‡æ˜¾ç¤º
            const count = scene === 'bromine' ? 200 : 200;
            document.getElementById('particleCount').textContent = count;
            
            // é‡ç½®åŠ¨ç”»
            resetAnimation();
        }
        
        // åˆ‡æ¢è§†å›¾
        function switchView(view) {
            currentView = view;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('viewMicro').classList.toggle('secondary', view === 'micro');
            document.getElementById('viewMacro').classList.toggle('secondary', view === 'macro');
            document.getElementById('viewCompare').classList.toggle('secondary', view === 'compare');
            
            // æ˜¾ç¤º/éšè—å®è§‚è¦†ç›–å±‚
            const macroOverlay = document.getElementById('macroOverlay');
            macroOverlay.style.opacity = (view === 'macro' || view === 'compare') ? '1' : '0';
            
            // ç«‹å³é‡ç»˜
            lastTimestamp = 0;
            animate(performance.now());
        }
        
        // äº‹ä»¶ç›‘å¬å™¨è®¾ç½®
        function setupEventListeners() {
            // åœºæ™¯åˆ‡æ¢æŒ‰é’®
            document.getElementById('sceneBromine').addEventListener('click', () => switchScene('bromine'));
            document.getElementById('scenePermanganate').addEventListener('click', () => switchScene('permanganate'));
            
            // è§†å›¾åˆ‡æ¢æŒ‰é’®
            document.getElementById('viewMicro').addEventListener('click', () => switchView('micro'));
            document.getElementById('viewMacro').addEventListener('click', () => switchView('macro'));
            document.getElementById('viewCompare').addEventListener('click', () => switchView('compare'));
            
            // åŠ¨ç”»æ§åˆ¶æŒ‰é’®
            document.getElementById('playBtn').addEventListener('click', () => {
                if (isPlaying) {
                    pauseAnimation();
                } else {
                    startAnimation();
                }
            });
            document.getElementById('pauseBtn').addEventListener('click', pauseAnimation);
            document.getElementById('resetBtn').addEventListener('click', resetAnimation);
            
            // æ¸©åº¦æ»‘å—
            const tempSlider = document.getElementById('tempSlider');
            const tempValue = document.getElementById('tempValue');
            
            tempSlider.addEventListener('input', function() {
                temperature = parseInt(this.value);
                tempValue.textContent = `${temperature}Â°C`;
                
                // å¦‚æœåŠ¨ç”»æ­£åœ¨æ’­æ”¾ï¼Œæ¸©åº¦å˜åŒ–ä¼šç«‹å³ç”Ÿæ•ˆ
                if (isPlaying) {
                    lastTimestamp = 0;
                }
            });
            
            // ç²’å­å¤§å°æ»‘å—
            const sizeSlider = document.getElementById('sizeSlider');
            const sizeValue = document.getElementById('sizeValue');
            
            sizeSlider.addEventListener('input', function() {
                particleSizeFactor = parseInt(this.value);
                
                // æ›´æ–°æ˜¾ç¤ºå€¼
                if (particleSizeFactor <= 3) sizeValue.textContent = 'å°';
                else if (particleSizeFactor <= 7) sizeValue.textContent = 'ä¸­ç­‰';
                else sizeValue.textContent = 'å¤§';
                
                // æ›´æ–°ç²’å­å¤§å°
                updateParticleSizes();
                
                // ç«‹å³é‡ç»˜
                lastTimestamp = 0;
                animate(performance.now());
            });
            
            // æ˜¾ç¤ºé€‰é¡¹å¤é€‰æ¡†
            document.getElementById('showTraces').addEventListener('change', function() {
                showTraces = this.checked;
                lastTimestamp = 0;
                animate(performance.now());
            });
            
            document.getElementById('showConcentration').addEventListener('change', function() {
                showConcentration = this.checked;
                lastTimestamp = 0;
                animate(performance.now());
            });
            
            document.getElementById('trackParticles').addEventListener('change', function() {
                trackParticles = this.checked;
                
                // æ›´æ–°ç²’å­çš„è¿½è¸ªçŠ¶æ€
                trackedParticles.forEach(p => p.isTracked = trackParticles);
                
                lastTimestamp = 0;
                animate(performance.now());
            });
            
            document.getElementById('showVelocity').addEventListener('change', function() {
                showVelocity = this.checked;
                lastTimestamp = 0;
                animate(performance.now());
            });
            
            // ç‚¹å‡»Canvaså¯ä»¥æ‰‹åŠ¨è¿½è¸ªç²’å­
            canvas.addEventListener('click', function(event) {
                if (currentView === 'macro') return; // å®è§‚è§†å›¾ä¸‹ä¸è¿½è¸ª
                
                const rect = canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                // å¯»æ‰¾ç‚¹å‡»ä½ç½®é™„è¿‘çš„ç²’å­
                let closestParticle = null;
                let closestDistance = 20; // æœ€å¤§ç‚¹å‡»è·ç¦»
                
                particles.forEach(particle => {
                    const distance = Math.sqrt(
                        Math.pow(particle.x - x, 2) + Math.pow(particle.y - y, 2)
                    );
                    
                    if (distance < closestDistance && distance < particle.radius + 10) {
                        closestDistance = distance;
                        closestParticle = particle;
                    }
                });
                
                // å¦‚æœæ‰¾åˆ°ç²’å­ï¼Œåˆ‡æ¢å…¶è¿½è¸ªçŠ¶æ€
                if (closestParticle) {
                    closestParticle.isTracked = !closestParticle.isTracked;
                    
                    // æ›´æ–°è¿½è¸ªç²’å­åˆ—è¡¨
                    if (closestParticle.isTracked && !trackedParticles.includes(closestParticle)) {
                        trackedParticles.push(closestParticle);
                    } else if (!closestParticle.isTracked) {
                        const index = trackedParticles.indexOf(closestParticle);
                        if (index > -1) trackedParticles.splice(index, 1);
                    }
                    
                    // æ›´æ–°å¤é€‰æ¡†çŠ¶æ€
                    document.getElementById('trackParticles').checked = trackedParticles.length > 0;
                    trackParticles = trackedParticles.length > 0;
                    
                    lastTimestamp = 0;
                    animate(performance.now());
                }
            });
        }
        
        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            // åˆå§‹åŒ–Canvas
            resizeCanvas();
            
            // åˆå§‹åŒ–ç²’å­ç³»ç»Ÿ
            initParticles();
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            setupEventListeners();
            
            // è®¾ç½®åˆå§‹è§†å›¾
            switchView('compare');
            
            // è®¾ç½®åˆå§‹åœºæ™¯
            switchScene('bromine');
            
            // ç»˜åˆ¶åˆå§‹å¸§
            lastTimestamp = 0;
            animate(performance.now());
            
            // æ›´æ–°æ•™å­¦æç¤º
            updateTeachingTip();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
        
        // é˜²æ­¢å³é”®èœå•
        canvas.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });
        
    </script>
</body>
</html>