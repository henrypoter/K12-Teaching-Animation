# éœ€æ±‚ï¼šäºŒå‰æ ‘éå†ï¼ˆå‰åºã€ä¸­åºã€ååºé€’å½’è¿‡ç¨‹+æŒ‡é’ˆç§»åŠ¨ï¼‰

### 1. ä¸“ä¸šæ€è€ƒ

### 1. ä¸“ä¸šæ€è€ƒ

#### ç”¨æˆ·éœ€æ±‚åˆ†æ
1.  **ç›®æ ‡ç”¨æˆ·**ï¼šä¸»è¦ä¸ºå­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•çš„è®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿæˆ–è‡ªå­¦è€…ã€‚ä»–ä»¬å·²å…·å¤‡äºŒå‰æ ‘çš„åŸºæœ¬æ¦‚å¿µï¼Œä½†éš¾ä»¥ç›´è§‚ç†è§£é€’å½’éå†è¿‡ç¨‹ä¸­ç¨‹åºæ‰§è¡Œæ ˆã€èŠ‚ç‚¹è®¿é—®é¡ºåºå’ŒæŒ‡é’ˆç§»åŠ¨çš„ååŒå…³ç³»ã€‚
2.  **æ ¸å¿ƒç—›ç‚¹**ï¼š
    *   **é€’å½’è¿‡ç¨‹æŠ½è±¡**ï¼šé€’å½’çš„â€œè°ƒç”¨-è¿”å›â€æœºåˆ¶å’Œéšå¼çš„ç³»ç»Ÿæ ˆéš¾ä»¥å¯è§†åŒ–ï¼Œå¯¼è‡´å­¦ç”Ÿåªèƒ½æ­»è®°ç¡¬èƒŒéå†é¡ºåºã€‚
    *   **æŒ‡é’ˆçŠ¶æ€æ¨¡ç³Š**ï¼šåœ¨é€’å½’çš„ä¸åŒé˜¶æ®µï¼ˆè¿›å…¥å·¦å­æ ‘ã€è¿”å›ã€è®¿é—®èŠ‚ç‚¹ã€è¿›å…¥å³å­æ ‘ï¼‰ï¼Œå½“å‰â€œæŒ‡é’ˆâ€æˆ–â€œæ‰§è¡Œä½ç½®â€æŒ‡å‘å“ªé‡Œï¼Œå®¹æ˜“æ··æ·†ã€‚
    *   **ä¸‰è€…å¯¹æ¯”å›°éš¾**ï¼šå‰åºã€ä¸­åºã€ååºçš„ä»£ç å·®å¼‚å¾®å°ï¼Œä½†è¿‡ç¨‹æˆªç„¶ä¸åŒï¼Œéœ€è¦å¹¶æ’å¯¹æ¯”æ‰èƒ½æ·±åˆ»ç†è§£å…¶æœ¬è´¨åŒºåˆ«ã€‚
3.  **å­¦ä¹ ç›®æ ‡**ï¼šé€šè¿‡åŠ¨ç”»ï¼Œç”¨æˆ·åº”èƒ½æ¸…æ™°è¯´å‡ºä¸‰ç§éå†çš„èŠ‚ç‚¹è®¿é—®åºåˆ—ï¼Œå¹¶èƒ½é€æ­¥è§£é‡Šé€’å½’åœ¨æ¯ä¸€èŠ‚ç‚¹ä¸Šçš„å…·ä½“æ“ä½œï¼ˆè®¿é—®ã€å‘å·¦é€’å½’ã€å‘å³é€’å½’ï¼‰åŠå…¶é¡ºåºã€‚

#### æ•™å­¦è®¾è®¡æ€è·¯ï¼ˆæ ¸å¿ƒæ¦‚å¿µã€è®¤çŸ¥è§„å¾‹ã€äº¤äº’è®¾è®¡ã€è§†è§‰å‘ˆç°ï¼‰
1.  **æ ¸å¿ƒæ¦‚å¿µè§£æ„**ï¼š
    *   å°†ä¸€æ¬¡é€’å½’è°ƒç”¨åˆ†è§£ä¸ºå‡ ä¸ªå…³é”®â€œåŠ¨ä½œâ€ï¼š`è®¿é—®èŠ‚ç‚¹ï¼ˆVï¼‰`ã€`å‘å·¦é€’å½’ï¼ˆLï¼‰`ã€`å‘å³é€’å½’ï¼ˆRï¼‰`ã€‚
    *   ä¸‰ç§éå†çš„æœ¬è´¨æ˜¯è¿™ä¸‰ä¸ªåŠ¨ä½œçš„æ‰§è¡Œé¡ºåºä¸åŒï¼š
        *   å‰åºï¼š`V -> L -> R`
        *   ä¸­åºï¼š`L -> V -> R`
        *   ååºï¼š`L -> R -> V`
    *   â€œæŒ‡é’ˆç§»åŠ¨â€å®è´¨æ˜¯å½“å‰é€’å½’è°ƒç”¨æ‰€å…³æ³¨çš„èŠ‚ç‚¹ï¼Œä»¥åŠç¨‹åºæ‰§è¡Œæµçš„è·³è½¬ã€‚

2.  **éµå¾ªè®¤çŸ¥è§„å¾‹**ï¼š
    *   **ä»å…·ä½“åˆ°æŠ½è±¡**ï¼šå…ˆå±•ç¤ºä¸€æ£µå…·ä½“çš„äºŒå‰æ ‘ï¼Œç„¶åé€šè¿‡é«˜äº®å’ŒåŠ¨ç”»å±•ç¤ºéå†è¿‡ç¨‹ã€‚
    *   **åˆ†æ­¥ä¸è¿è´¯ç»“åˆ**ï¼šæä¾›â€œå•æ­¥æ‰§è¡Œâ€è®©ç”¨æˆ·æ§åˆ¶èŠ‚å¥ï¼Œè§‚å¯Ÿæ¯ä¸€æ­¥ç»†èŠ‚ï¼›åŒæ—¶æä¾›â€œè¿ç»­æ’­æ”¾â€ä»¥å½¢æˆæ•´ä½“æµç¨‹è§‚ã€‚
    *   **å¯¹æ¯”å­¦ä¹ **ï¼šå¹¶æ’å±•ç¤ºä¸‰ç§éå†çš„åŠ¨ç”»ï¼Œçªå‡ºç›¸åŒæ ‘ç»“æ„ä¸‹è®¿é—®é¡ºåºçš„å·®å¼‚ã€‚

3.  **äº¤äº’è®¾è®¡**ï¼š
    *   **åŒé‡è§†è§’åŒæ­¥**ï¼š
        *   **æ ‘è§†å›¾**ï¼šé«˜äº®å½“å‰èŠ‚ç‚¹ï¼Œæ˜¾ç¤ºè®¿é—®ç»“æœåºåˆ—ã€‚
        *   **ä»£ç è§†å›¾**ï¼šé«˜äº®å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»£ç è¡Œï¼ˆ`visit`ï¼Œ `traverse(left)`ï¼Œ `traverse(right)`ï¼‰ã€‚
        *   **æ ˆè§†å›¾**ï¼šå¯è§†åŒ–é€’å½’è°ƒç”¨æ ˆï¼Œæ˜¾ç¤ºæ¯ä¸ªæ ˆå¸§å¯¹åº”çš„èŠ‚ç‚¹å’Œè¿”å›åœ°å€ï¼ˆå³å°†æ‰§è¡Œçš„åŠ¨ä½œï¼šVï¼Œ Lï¼Œ Rï¼‰ã€‚
    *   **è¿›ç¨‹æ§åˆ¶**ï¼šæä¾›æ’­æ”¾/æš‚åœã€ä¸‹ä¸€æ­¥ã€ä¸Šä¸€æ­¥ã€é‡ç½®æ§ä»¶ã€‚
    *   **æ¨¡å¼é€‰æ‹©**ï¼šå…è®¸ç”¨æˆ·å•ç‹¬å­¦ä¹ ä¸€ç§éå†ï¼Œæˆ–å¹¶æ’å¯¹æ¯”ä¸‰ç§éå†ã€‚

4.  **è§†è§‰å‘ˆç°**ï¼š
    *   **æ ‘ç»“æ„**ï¼šèŠ‚ç‚¹æ¸…æ™°ï¼Œè¿çº¿åˆ†æ˜ã€‚å½“å‰èŠ‚ç‚¹ç”¨é†’ç›®çš„é¢œè‰²ï¼ˆå¦‚æ©™è‰²ï¼‰é«˜äº®ã€‚
    *   **çŠ¶æ€ç¼–ç **ï¼š
        *   **å·²è®¿é—®**ï¼šèŠ‚ç‚¹å˜ä¸ºå¦ä¸€ç§é¢œè‰²ï¼ˆå¦‚ç»¿è‰²ï¼‰å¹¶ä¼´éšâ€œå·²è®¿é—®â€æ ‡è®°ã€‚
        *   **è®¿é—®åºåˆ—**ï¼šåœ¨ç‹¬ç«‹åŒºåŸŸåŠ¨æ€æ·»åŠ èŠ‚ç‚¹å€¼ï¼Œå½¢æˆè®¿é—®é¡ºåºåˆ—è¡¨ã€‚
    *   **æŒ‡é’ˆ/æ‰§è¡Œä½ç½®**ï¼šåœ¨æ ‘è§†å›¾ä¸Šï¼Œç”¨ä¸€ä¸ªæ˜æ˜¾çš„æŒ‡ç¤ºå™¨ï¼ˆå¦‚ä¸‰è§’å½¢ç®­å¤´ï¼‰æŒ‡å‘â€œå½“å‰èŠ‚ç‚¹â€ã€‚åœ¨ä»£ç è§†å›¾ï¼Œé«˜äº®å½“å‰è¡Œã€‚
    *   **é€’å½’æ ˆ**ï¼šç”¨å †å çš„æ–¹å—è¡¨ç¤ºæ ˆå¸§ï¼Œä»ä¸Šåˆ°ä¸‹æ¨¡æ‹Ÿæ ˆçš„å¢é•¿ä¸æ”¶ç¼©ã€‚æ¯ä¸ªæ–¹å—å†…å†™æ˜èŠ‚ç‚¹å€¼å’Œå¾…æ‰§è¡ŒåŠ¨ä½œã€‚

#### é…è‰²æ–¹æ¡ˆé€‰æ‹©
*   **èƒŒæ™¯ä¸ç”»å¸ƒ**ï¼šæµ…ç°è‰²ï¼ˆ`#f5f5f5`ï¼‰æˆ–ç™½è‰²èƒŒæ™¯ï¼Œç¡®ä¿æ¸…æ™°åº¦ã€‚
*   **äºŒå‰æ ‘**ï¼š
    *   èŠ‚ç‚¹é»˜è®¤ï¼šç™½è‰²å¡«å……ï¼Œæ·±ç°è‰²è¾¹æ¡†ï¼ˆ`#333`ï¼‰ï¼Œé»‘è‰²æ–‡å­—ã€‚
    *   å½“å‰èŠ‚ç‚¹ï¼šæ©™è‰²å¡«å……ï¼ˆ`#FFA726`ï¼‰ï¼Œå¼ºè°ƒé†’ç›®ã€‚
    *   å·²è®¿é—®èŠ‚ç‚¹ï¼šæµ…ç»¿è‰²å¡«å……ï¼ˆ`#C8E6C9`ï¼‰ï¼Œè¡¨ç¤ºå®ŒæˆçŠ¶æ€ã€‚
*   **ä»£ç é«˜äº®**ï¼šå½“å‰æ‰§è¡Œè¡Œç”¨æµ…æ©™è‰²èƒŒæ™¯ï¼ˆ`#FFF3E0`ï¼‰é«˜äº®ã€‚
*   **é€’å½’æ ˆ**ï¼š
    *   æ ˆå¸§ï¼šä¸åŒæ·±æµ…çš„è“è‰²ç³»ï¼ˆå¦‚ `#E3F2FD`, `#BBDEFB`, `#90CAF9`ï¼‰ï¼Œè¡¨ç¤ºå±‚çº§ã€‚
    *   æ–‡å­—ï¼šæ·±è“è‰²ï¼ˆ`#1565C0`ï¼‰ã€‚
*   **è®¿é—®åºåˆ—**ï¼šä¸­æ€§æ·±ç°è‰²ï¼ˆ`#424242`ï¼‰åŒºåŸŸï¼Œæ–‡å­—é»‘è‰²ã€‚
*   **æŒ‰é’®ä¸æ§ä»¶**ï¼šé‡‡ç”¨æ‰å¹³åŒ–è®¾è®¡ï¼Œä¸»è‰²è°ƒè“è‰²ï¼ˆ`#2196F3`ï¼‰ï¼Œæ‚¬åœæ—¶åŠ æ·±ã€‚
*   **å¯¹æ¯”æ¨¡å¼è¾¹æ¡†**ï¼šä¸ºä¸‰ç§éå†çš„è§†å›¾åŒºåŸŸæ·»åŠ ç»†å¾®çš„è¾¹æ¡†è‰²ï¼ˆå¦‚å‰åºæµ…çº¢ã€ä¸­åºæµ…è“ã€ååºæµ…ç´«ï¼‰ä»¥ç¤ºåŒºåˆ†ã€‚

#### äº¤äº’åŠŸèƒ½åˆ—è¡¨
1.  **æ ‘ç»“æ„æ§åˆ¶**ï¼š
    *   é¢„è®¾äºŒå‰æ ‘ç¤ºä¾‹é€‰æ‹©å™¨ï¼ˆå¦‚ï¼šå®Œæ•´äºŒå‰æ ‘ã€æ–œæ ‘ã€æ™®é€šæ ‘ï¼‰ã€‚
    *   ï¼ˆå¯é€‰ï¼‰ç®€å•çš„æ‰‹åŠ¨æ„å»º/ç¼–è¾‘æ ‘èŠ‚ç‚¹åŠŸèƒ½ã€‚
2.  **éå†æ¨¡å¼é€‰æ‹©**ï¼š
    *   å•é€‰æŒ‰é’®ï¼šå‰åºã€ä¸­åºã€ååºã€‚
    *   â€œå¯¹æ¯”æ¨¡å¼â€å¤é€‰æ¡†ï¼šå¼€å¯åï¼Œå¹¶æ’æ˜¾ç¤ºä¸‰ç§éå†çš„åŠ¨ç”»ã€‚
3.  **åŠ¨ç”»æ§åˆ¶é¢æ¿**ï¼š
    *   `å¼€å§‹ / æš‚åœ` æŒ‰é’®ã€‚
    *   `ä¸‹ä¸€æ­¥` æŒ‰é’®ï¼šå•æ­¥æ‰§è¡Œä¸‹ä¸€ä¸ªåŠ¨ä½œï¼ˆè®¿é—®ã€è¿›å…¥å·¦é€’å½’ã€è¿›å…¥å³é€’å½’ã€è¿”å›ï¼‰ã€‚
    *   `ä¸Šä¸€æ­¥` æŒ‰é’®ï¼šå›é€€åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€ã€‚
    *   `é‡ç½®` æŒ‰é’®ï¼šæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚
    *   åŠ¨ç”»é€Ÿåº¦æ»‘å—ã€‚
4.  **åŒæ­¥è§†å›¾æ˜¾ç¤º**ï¼š
    *   **ä¸»æ ‘è§†å›¾**ï¼šåŠ¨æ€é«˜äº®èŠ‚ç‚¹ï¼Œæ˜¾ç¤ºæŒ‡é’ˆã€‚
    *   **ä»£ç é¢æ¿**ï¼šæ ¹æ®æ‰€é€‰éå†ç±»å‹æ˜¾ç¤ºå¯¹åº”ä¼ªä»£ç ï¼Œå¹¶é«˜äº®æ‰§è¡Œè¡Œã€‚
    *   **é€’å½’æ ˆé¢æ¿**ï¼šåŠ¨æ€å±•ç¤ºè°ƒç”¨æ ˆçš„å‹æ ˆä¸å¼¹æ ˆè¿‡ç¨‹ã€‚
    *   **è®¿é—®åºåˆ—é¢æ¿**ï¼šå®æ—¶æ˜¾ç¤ºå·²è®¿é—®çš„èŠ‚ç‚¹å€¼åºåˆ—ã€‚
5.  **çŠ¶æ€æç¤º**ï¼šåœ¨æ§åˆ¶é¢æ¿é™„è¿‘ç”¨æ–‡å­—ç®€è¦æè¿°å½“å‰æ‰§è¡Œçš„åŠ¨ä½œï¼ˆä¾‹å¦‚ï¼šâ€œè®¿é—®èŠ‚ç‚¹ Aâ€ã€â€œé€’å½’è°ƒç”¨è¿›å…¥å·¦å­æ ‘ Bâ€ã€â€œä»èŠ‚ç‚¹ C è¿”å›â€ï¼‰ã€‚

### 2. HTML_CODE

### 2. HTML_CODE

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒå‰æ ‘éå†é€’å½’è¿‡ç¨‹å¯è§†åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #2196F3;
        }

        h1 {
            color: #1565C0;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .control-panel {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group h3 {
            color: #2196F3;
            font-size: 1em;
            margin-bottom: 5px;
        }

        .tree-selector, .traversal-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            background-color: #E3F2FD;
            border: 1px solid #BBDEFB;
            border-radius: 6px;
            cursor: pointer;
            color: #1565C0;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn:hover {
            background-color: #BBDEFB;
            transform: translateY(-2px);
        }

        .btn.active {
            background-color: #2196F3;
            color: white;
            border-color: #1976D2;
        }

        .animation-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .speed-slider {
            width: 120px;
        }

        .status-display {
            background-color: #FFF3E0;
            padding: 12px 20px;
            border-radius: 8px;
            border-left: 4px solid #FFA726;
            font-weight: 500;
            color: #333;
            min-height: 50px;
            display: flex;
            align-items: center;
        }

        .visualization-area {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .tree-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }

        .tree-section h2 {
            color: #2196F3;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #E0E0E0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tree-section h2 .color-indicator {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .preorder .color-indicator { background-color: #FFCDD2; }
        .inorder .color-indicator { background-color: #C8E6C9; }
        .postorder .color-indicator { background-color: #BBDEFB; }

        .tree-container {
            flex: 1;
            position: relative;
            min-height: 300px;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            overflow: auto;
            background-color: #fafafa;
        }

        .code-container, .stack-container, .sequence-container {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid #E0E0E0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow: auto;
        }

        .code-line {
            padding: 4px 8px;
            margin: 2px 0;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .code-line.highlighted {
            background-color: #FFF3E0;
            font-weight: bold;
        }

        .stack-visualization {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            gap: 5px;
            min-height: 150px;
        }

        .stack-frame {
            background-color: #E3F2FD;
            border: 2px solid #BBDEFB;
            border-radius: 6px;
            padding: 10px 15px;
            width: 80%;
            text-align: center;
            font-weight: 500;
            color: #1565C0;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stack-frame.active {
            background-color: #BBDEFB;
            border-color: #2196F3;
            transform: scale(1.05);
        }

        .sequence-visualization {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            min-height: 60px;
        }

        .sequence-node {
            background-color: #C8E6C9;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #2E7D32;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .sequence-node.new {
            background-color: #81C784;
            transform: scale(1.1);
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .node-default { background-color: white; border: 2px solid #333; }
        .node-current { background-color: #FFA726; }
        .node-visited { background-color: #C8E6C9; }

        @media (max-width: 1200px) {
            .visualization-area {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒ³ äºŒå‰æ ‘éå†é€’å½’è¿‡ç¨‹å¯è§†åŒ–</h1>
            <p class="subtitle">å‰åºã€ä¸­åºã€ååºéå†çš„é€’å½’è¿‡ç¨‹ã€æŒ‡é’ˆç§»åŠ¨ä¸è°ƒç”¨æ ˆå¯è§†åŒ–</p>
        </header>

        <div class="main-content">
            <div class="control-panel">
                <div class="control-group">
                    <h3>äºŒå‰æ ‘ç»“æ„</h3>
                    <div class="tree-selector">
                        <button class="btn active" data-tree="balanced">å¹³è¡¡äºŒå‰æ ‘</button>
                        <button class="btn" data-tree="left-skewed">å·¦æ–œæ ‘</button>
                        <button class="btn" data-tree="right-skewed">å³æ–œæ ‘</button>
                        <button class="btn" data-tree="custom">æ™®é€šäºŒå‰æ ‘</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>éå†æ¨¡å¼</h3>
                    <div class="traversal-selector">
                        <button class="btn active" data-traversal="preorder">å‰åºéå† (Vâ†’Lâ†’R)</button>
                        <button class="btn" data-traversal="inorder">ä¸­åºéå† (Lâ†’Vâ†’R)</button>
                        <button class="btn" data-traversal="postorder">ååºéå† (Lâ†’Râ†’V)</button>
                        <label style="display: flex; align-items: center; gap: 8px; margin-left: 10px;">
                            <input type="checkbox" id="compare-mode"> å¯¹æ¯”æ¨¡å¼
                        </label>
                    </div>
                </div>

                <div class="control-group animation-controls">
                    <h3>åŠ¨ç”»æ§åˆ¶</h3>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn" id="start-pause">â–¶ï¸ å¼€å§‹</button>
                        <button class="btn" id="next-step">â­ï¸ ä¸‹ä¸€æ­¥</button>
                        <button class="btn" id="prev-step">â®ï¸ ä¸Šä¸€æ­¥</button>
                        <button class="btn" id="reset">ğŸ”„ é‡ç½®</button>
                    </div>
                    <div class="speed-control">
                        <span>é€Ÿåº¦:</span>
                        <input type="range" min="1" max="10" value="5" class="speed-slider" id="speed-slider">
                        <span id="speed-value">ä¸­é€Ÿ</span>
                    </div>
                </div>
            </div>

            <div class="status-display" id="status-display">
                è¯·é€‰æ‹©éå†æ¨¡å¼å¹¶ç‚¹å‡»"å¼€å§‹"æŒ‰é’®å¯åŠ¨åŠ¨ç”»ã€‚
            </div>

            <div class="visualization-area" id="visualization-area">
                <!-- å‰åºéå†è§†å›¾ -->
                <div class="tree-section preorder" id="preorder-section">
                    <h2><span class="color-indicator"></span>å‰åºéå† (Vâ†’Lâ†’R)</h2>
                    <div class="tree-container" id="preorder-tree">
                        <canvas id="preorder-canvas" width="600" height="300"></canvas>
                    </div>
                    <div class="code-container" id="preorder-code">
                        <div class="code-line">function preorder(node) {</div>
                        <div class="code-line">    if (node == null) return;</div>
                        <div class="code-line">    visit(node);           // V</div>
                        <div class="code-line">    preorder(node.left);  // L</div>
                        <div class="code-line">    preorder(node.right); // R</div>
                        <div class="code-line">}</div>
                    </div>
                    <div class="stack-container">
                        <h3>é€’å½’è°ƒç”¨æ ˆ</h3>
                        <div class="stack-visualization" id="preorder-stack"></div>
                    </div>
                    <div class="sequence-container">
                        <h3>è®¿é—®åºåˆ—</h3>
                        <div class="sequence-visualization" id="preorder-sequence"></div>
                    </div>
                </div>

                <!-- ä¸­åºéå†è§†å›¾ -->
                <div class="tree-section inorder" id="inorder-section" style="display: none;">
                    <h2><span class="color-indicator"></span>ä¸­åºéå† (Lâ†’Vâ†’R)</h2>
                    <div class="tree-container" id="inorder-tree">
                        <canvas id="inorder-canvas" width="600" height="300"></canvas>
                    </div>
                    <div class="code-container" id="inorder-code">
                        <div class="code-line">function inorder(node) {</div>
                        <div class="code-line">    if (node == null) return;</div>
                        <div class="code-line">    inorder(node.left);   // L</div>
                        <div class="code-line">    visit(node);          // V</div>
                        <div class="code-line">    inorder(node.right);  // R</div>
                        <div class="code-line">}</div>
                    </div>
                    <div class="stack-container">
                        <h3>é€’å½’è°ƒç”¨æ ˆ</h3>
                        <div class="stack-visualization" id="inorder-stack"></div>
                    </div>
                    <div class="sequence-container">
                        <h3>è®¿é—®åºåˆ—</h3>
                        <div class="sequence-visualization" id="inorder-sequence"></div>
                    </div>
                </div>

                <!-- ååºéå†è§†å›¾ -->
                <div class="tree-section postorder" id="postorder-section" style="display: none;">
                    <h2><span class="color-indicator"></span>ååºéå† (Lâ†’Râ†’V)</h2>
                    <div class="tree-container" id="postorder-tree">
                        <canvas id="postorder-canvas" width="600" height="300"></canvas>
                    </div>
                    <div class="code-container" id="postorder-code">
                        <div class="code-line">function postorder(node) {</div>
                        <div class="code-line">    if (node == null) return;</div>
                        <div class="code-line">    postorder(node.left);  // L</div>
                        <div class="code-line">    postorder(node.right); // R</div>
                        <div class="code-line">    visit(node);           // V</div>
                        <div class="code-line">}</div>
                    </div>
                    <div class="stack-container">
                        <h3>é€’å½’è°ƒç”¨æ ˆ</h3>
                        <div class="stack-visualization" id="postorder-stack"></div>
                    </div>
                    <div class="sequence-container">
                        <h3>è®¿é—®åºåˆ—</h3>
                        <div class="sequence-visualization" id="postorder-sequence"></div>
                    </div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color node-default"></div>
                    <span>æœªè®¿é—®èŠ‚ç‚¹</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color node-current"></div>
                    <span>å½“å‰èŠ‚ç‚¹</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color node-visited"></div>
                    <span>å·²è®¿é—®èŠ‚ç‚¹</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FFF3E0;"></div>
                    <span>å½“å‰æ‰§è¡Œä»£ç è¡Œ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #BBDEFB;"></div>
                    <span>æ´»åŠ¨æ ˆå¸§</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // äºŒå‰æ ‘èŠ‚ç‚¹ç±»
        class TreeNode {
            constructor(value, x, y) {
                this.value = value;
                this.left = null;
                this.right = null;
                this.x = x;
                this.y = y;
                this.radius = 25;
                this.state = 'default'; // 'default', 'current', 'visited'
            }
        }

        // éå†çŠ¶æ€ç±»
        class TraversalState {
            constructor(type) {
                this.type = type; // 'preorder', 'inorder', 'postorder'
                this.currentNode = null;
                this.callStack = [];
                this.visitedSequence = [];
                this.isAnimating = false;
                this.speed = 500; // æ¯«ç§’
                this.stepIndex = 0;
                this.traversalSteps = [];
                this.codeLines = [];
                this.initCodeLines();
            }

            initCodeLines() {
                if (this.type === 'preorder') {
                    this.codeLines = [2, 3, 4, 5, 6];
                } else if (this.type === 'inorder') {
                    this.codeLines = [2, 3, 4, 5, 6];
                } else if (this.type === 'postorder') {
                    this.codeLines = [2, 3, 4, 5, 6];
                }
            }

            reset() {
                this.currentNode = null;
                this.callStack = [];
                this.visitedSequence = [];
                this.isAnimating = false;
                this.stepIndex = 0;
                this.traversalSteps = [];
            }

            generateSteps(node) {
                this.traversalSteps = [];
                this._generateStepsRecursive(node, []);
                return this.traversalSteps;
            }

            _generateStepsRecursive(node, stack) {
                if (!node) {
                    this.traversalSteps.push({
                        action: 'return',
                        node: null,
                        stack: [...stack],
                        codeLine: 2
                    });
                    return;
                }

                // æ ¹æ®éå†ç±»å‹ç”Ÿæˆä¸åŒçš„æ­¥éª¤åºåˆ—
                if (this.type === 'preorder') {
                    // å‰åº: V -> L -> R
                    this.traversalSteps.push({
                        action: 'enter',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'V'}],
                        codeLine: 2
                    });
                    
                    this.traversalSteps.push({
                        action: 'visit',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'L'}],
                        codeLine: 3
                    });
                    
                    this._generateStepsRecursive(node.left, [...stack, {node: node, nextAction: 'R'}]);
                    
                    this.traversalSteps.push({
                        action: 'enter_right',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'R'}],
                        codeLine: 5
                    });
                    
                    this._generateStepsRecursive(node.right, [...stack]);
                    
                    this.traversalSteps.push({
                        action: 'return',
                        node: node,
                        stack: [...stack],
                        codeLine: 6
                    });
                } else if (this.type === 'inorder') {
                    // ä¸­åº: L -> V -> R
                    this.traversalSteps.push({
                        action: 'enter',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'L'}],
                        codeLine: 2
                    });
                    
                    this._generateStepsRecursive(node.left, [...stack, {node: node, nextAction: 'V'}]);
                    
                    this.traversalSteps.push({
                        action: 'visit',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'R'}],
                        codeLine: 4
                    });
                    
                    this.traversalSteps.push({
                        action: 'enter_right',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'R'}],
                        codeLine: 5
                    });
                    
                    this._generateStepsRecursive(node.right, [...stack]);
                    
                    this.traversalSteps.push({
                        action: 'return',
                        node: node,
                        stack: [...stack],
                        codeLine: 6
                    });
                } else if (this.type === 'postorder') {
                    // ååº: L -> R -> V
                    this.traversalSteps.push({
                        action: 'enter',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'L'}],
                        codeLine: 2
                    });
                    
                    this._generateStepsRecursive(node.left, [...stack, {node: node, nextAction: 'R'}]);
                    
                    this.traversalSteps.push({
                        action: 'enter_right',
                        node: node,
                        stack: [...stack, {node: node, nextAction: 'R'}],
                        codeLine: 4
                    });
                    
                    this._generateStepsRecursive(node.right, [...stack, {node: node, nextAction: 'V'}]);
                    
                    this.traversalSteps.push({
                        action: 'visit',
                        node: node,
                        stack: [...stack],
                        codeLine: 5
                    });
                    
                    this.traversalSteps.push({
                        action: 'return',
                        node: node,
                        stack: [...stack],
                        codeLine: 6
                    });
                }
            }

            getCurrentStep() {
                if (this.stepIndex < this.traversalSteps.length) {
                    return this.traversalSteps[this.stepIndex];
                }
                return null;
            }

            nextStep() {
                if (this.stepIndex < this.traversalSteps.length) {
                    const step = this.traversalSteps[this.stepIndex];
                    this.stepIndex++;
                    
                    // æ›´æ–°çŠ¶æ€
                    if (step.action === 'visit') {
                        this.visitedSequence.push(step.node.value);
                        step.node.state = 'visited';
                    } else if (step.action === 'enter' || step.action === 'enter_right') {
                        this.currentNode = step.node;
                        step.node.state = 'current';
                    } else if (step.action === 'return') {
                        if (this.currentNode) {
                            this.currentNode.state = 'visited';
                        }
                        this.currentNode = null;
                    }
                    
                    this.callStack = step.stack;
                    return step;
                }
                return null;
            }

            prevStep() {
                if (this.stepIndex > 0) {
                    this.stepIndex--;
                    const step = this.traversalSteps[this.stepIndex];
                    
                    // å›é€€çŠ¶æ€
                    if (step.action === 'visit') {
                        this.visitedSequence.pop();
                        step.node.state = 'default';
                    } else if (step.action === 'enter' || step.action === 'enter_right') {
                        step.node.state = 'default';
                        this.currentNode = null;
                    } else if (step.action === 'return') {
                        // æŸ¥æ‰¾å‰ä¸€ä¸ªèŠ‚ç‚¹
                        if (this.stepIndex > 0) {
                            const prevStep = this.traversalSteps[this.stepIndex - 1];
                            if (prevStep.node) {
                                this.currentNode = prevStep.node;
                                this.currentNode.state = 'current';
                            }
                        }
                    }
                    
                    // æ›´æ–°è°ƒç”¨æ ˆ
                    if (this.stepIndex > 0) {
                        this.callStack = this.traversalSteps[this.stepIndex - 1].stack;
                    } else {
                        this.callStack = [];
                    }
                    
                    return step;
                }
                return null;
            }
        }

        // ä¸»åº”ç”¨ç±»
        class BinaryTreeVisualizer {
            constructor() {
                this.treeRoot = null;
                this.traversalStates = {
                    preorder: new TraversalState('preorder'),
                    inorder: new TraversalState('inorder'),
                    postorder: new TraversalState('postorder')
                };
                this.currentTraversal = 'preorder';
                this.compareMode = false;
                this.animationInterval = null;
                this.speed = 5;
                
                this.initTree();
                this.initEventListeners();
                this.render();
            }

            initTree() {
                // åˆ›å»ºå¹³è¡¡äºŒå‰æ ‘
                this.createBalancedTree();
            }

            createBalancedTree() {
                // åˆ›å»ºèŠ‚ç‚¹
                const root = new TreeNode('A', 300, 50);
                const b = new TreeNode('B', 200, 120);
                const c = new TreeNode('C', 400, 120);
                const d = new TreeNode('D', 150, 190);
                const e = new TreeNode('E', 250, 190);
                const f = new TreeNode('F', 350, 190);
                const g = new TreeNode('G', 450, 190);
                
                // æ„å»ºæ ‘ç»“æ„
                root.left = b;
                root.right = c;
                b.left = d;
                b.right = e;
                c.left = f;
                c.right = g;
                
                this.treeRoot = root;
                this.resetAllTraversals();
            }

            createLeftSkewedTree() {
                const root = new TreeNode('A', 400, 50);
                const b = new TreeNode('B', 350, 120);
                const c = new TreeNode('C', 300, 190);
                const d = new TreeNode('D', 250, 260);
                
                root.left = b;
                b.left = c;
                c.left = d;
                
                this.treeRoot = root;
                this.resetAllTraversals();
            }

            createRightSkewedTree() {
                const root = new TreeNode('A', 200, 50);
                const b = new TreeNode('B', 250, 120);
                const c = new TreeNode('C', 300, 190);
                const d = new TreeNode('D', 350, 260);
                
                root.right = b;
                b.right = c;
                c.right = d;
                
                this.treeRoot = root;
                this.resetAllTraversals();
            }

            createCustomTree() {
                const root = new TreeNode('A', 300, 50);
                const b = new TreeNode('B', 200, 120);
                const c = new TreeNode('C', 400, 120);
                const d = new TreeNode('D', 150, 190);
                const e = new TreeNode('E', 350, 190);
                const f = new TreeNode('F', 450, 190);
                
                root.left = b;
                root.right = c;
                b.left = d;
                c.left = e;
                c.right = f;
                
                this.treeRoot = root;
                this.resetAllTraversals();
            }

            resetAllTraversals() {
                // é‡ç½®æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€
                this.resetNodeStates(this.treeRoot);
                
                // é‡ç½®æ‰€æœ‰éå†çŠ¶æ€
                Object.values(this.traversalStates).forEach(state => {
                    state.reset();
                    state.generateSteps(this.treeRoot);
                });
            }

            resetNodeStates(node) {
                if (!node) return;
                node.state = 'default';
                this.resetNodeStates(node.left);
                this.resetNodeStates(node.right);
            }

            initEventListeners() {
                // æ ‘ç»“æ„é€‰æ‹©
                document.querySelectorAll('.tree-selector .btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.tree-selector .btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        
                        const treeType = btn.dataset.tree;
                        if (treeType === 'balanced') {
                            this.createBalancedTree();
                        } else if (treeType === 'left-skewed') {
                            this.createLeftSkewedTree();
                        } else if (treeType === 'right-skewed') {
                            this.createRightSkewedTree();
                        } else if (treeType === 'custom') {
                            this.createCustomTree();
                        }
                        
                        this.render();
                    });
                });

                // éå†æ¨¡å¼é€‰æ‹©
                document.querySelectorAll('.traversal-selector .btn[data-traversal]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.traversal-selector .btn[data-traversal]').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        
                        this.currentTraversal = btn.dataset.traversal;
                        this.updateViewVisibility();
                        this.render();
                    });
                });

                // å¯¹æ¯”æ¨¡å¼åˆ‡æ¢
                document.getElementById('compare-mode').addEventListener('change', (e) => {
                    this.compareMode = e.target.checked;
                    this.updateViewVisibility();
                    this.render();
                });

                // åŠ¨ç”»æ§åˆ¶
                document.getElementById('start-pause').addEventListener('click', () => {
                    this.toggleAnimation();
                });

                document.getElementById('next-step').addEventListener('click', () => {
                    this.stopAnimation();
                    this.nextStep();
                });

                document.getElementById('prev-step').addEventListener('click', () => {
                    this.stopAnimation();
                    this.prevStep();
                });

                document.getElementById('reset').addEventListener('click', () => {
                    this.stopAnimation();
                    this.resetAllTraversals();
                    this.render();
                });

                // é€Ÿåº¦æ§åˆ¶
                document.getElementById('speed-slider').addEventListener('input', (e) => {
                    this.speed = parseInt(e.target.value);
                    document.getElementById('speed-value').textContent = 
                        this.speed <= 3 ? 'æ…¢é€Ÿ' : this.speed <= 7 ? 'ä¸­é€Ÿ' : 'å¿«é€Ÿ';
                    
                    if (this.animationInterval) {
                        this.stopAnimation();
                        this.startAnimation();
                    }
                });
            }

            updateViewVisibility() {
                const preorderSection = document.getElementById('preorder-section');
                const inorderSection = document.getElementById('inorder-section');
                const postorderSection = document.getElementById('postorder-section');
                const visualizationArea = document.getElementById('visualization-area');
                
                if (this.compareMode) {
                    // å¯¹æ¯”æ¨¡å¼ï¼šæ˜¾ç¤ºæ‰€æœ‰ä¸‰ä¸ªè§†å›¾
                    preorderSection.style.display = 'flex';
                    inorderSection.style.display = 'flex';
                    postorderSection.style.display = 'flex';
                    visualizationArea.style.flexDirection = 'row';
                } else {
                    // å•è§†å›¾æ¨¡å¼ï¼šåªæ˜¾ç¤ºå½“å‰é€‰æ‹©çš„éå†
                    preorderSection.style.display = this.currentTraversal === 'preorder' ? 'flex' : 'none';
                    inorderSection.style.display = this.currentTraversal === 'inorder' ? 'flex' : 'none';
                    postorderSection.style.display = this.currentTraversal === 'postorder' ? 'flex' : 'none';
                    visualizationArea.style.flexDirection = 'column';
                }
            }

            toggleAnimation() {
                const btn = document.getElementById('start-pause');
                if (this.animationInterval) {
                    this.stopAnimation();
                    btn.innerHTML = 'â–¶ï¸ ç»§ç»­';
                } else {
                    this.startAnimation();
                    btn.innerHTML = 'â¸ï¸ æš‚åœ';
                }
            }

            startAnimation() {
                this.stopAnimation();
                
                const interval = 1100 - (this.speed * 100); // é€Ÿåº¦æ˜ å°„ï¼š1=1000ms, 10=100ms
                this.animationInterval = setInterval(() => {
                    if (!this.nextStep()) {
                        this.stopAnimation();
                        document.getElementById('start-pause').innerHTML = 'â–¶ï¸ å¼€å§‹';
                    }
                }, interval);
            }

            stopAnimation() {
                if (this.animationInterval) {
                    clearInterval(this.animationInterval);
                    this.animationInterval = null;
                }
            }

            nextStep() {
                let stepPerformed = false;
                
                if (this.compareMode) {
                    // å¯¹æ¯”æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰éå†åŒæ—¶å‰è¿›
                    Object.values(this.traversalStates).forEach(state => {
                        if (state.nextStep()) {
                            stepPerformed = true;
                        }
                    });
                } else {
                    // å•è§†å›¾æ¨¡å¼ä¸‹ï¼Œåªå‰è¿›å½“å‰éå†
                    const state = this.traversalStates[this.currentTraversal];
                    if (state.nextStep()) {
                        stepPerformed = true;
                    }
                }
                
                if (stepPerformed) {
                    this.render();
                    this.updateStatus();
                }
                
                return stepPerformed;
            }

            prevStep() {
                let stepPerformed = false;
                
                if (this.compareMode) {
                    // å¯¹æ¯”æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰éå†åŒæ—¶å›é€€
                    Object.values(this.traversalStates).forEach(state => {
                        if (state.prevStep()) {
                            stepPerformed = true;
                        }
                    });
                } else {
                    // å•è§†å›¾æ¨¡å¼ä¸‹ï¼Œåªå›é€€å½“å‰éå†
                    const state = this.traversalStates[this.currentTraversal];
                    if (state.prevStep()) {
                        stepPerformed = true;
                    }
                }
                
                if (stepPerformed) {
                    this.render();
                    this.updateStatus();
                }
            }

            updateStatus() {
                const statusDisplay = document.getElementById('status-display');
                let statusText = '';
                
                if (this.compareMode) {
                    statusText = 'å¯¹æ¯”æ¨¡å¼ï¼šä¸‰ç§éå†åŒæ­¥è¿›è¡Œä¸­...';
                } else {
                    const state = this.traversalStates[this.currentTraversal];
                    const step = state.getCurrentStep();
                    
                    if (step) {
                        const actionMap = {
                            'enter': 'è¿›å…¥èŠ‚ç‚¹',
                            'visit': 'è®¿é—®èŠ‚ç‚¹',
                            'enter_right': 'è¿›å…¥å³å­æ ‘',
                            'return': 'è¿”å›'
                        };
                        
                        const nodeName = step.node ? step.node.value : 'null';
                        statusText = `${actionMap[step.action]} ${nodeName}`;
                        
                        if (step.action === 'visit') {
                            statusText += ` (å·²è®¿é—®èŠ‚ç‚¹: ${state.visitedSequence.join(' â†’ ')})`;
                        }
                    } else {
                        statusText = 'éå†å®Œæˆï¼';
                    }
                }
                
                statusDisplay.textContent = statusText;
            }

            drawTree(canvasId, traversalType) {
                const canvas = document.getElementById(canvasId);
                const ctx = canvas.getContext('2d');
                const state = this.traversalStates[traversalType];
                
                // æ¸…é™¤ç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶æ ‘
                this.drawTreeRecursive(ctx, this.treeRoot, state);
                
                // ç»˜åˆ¶å½“å‰èŠ‚ç‚¹æŒ‡é’ˆ
                if (state.currentNode) {
                    this.drawPointer(ctx, state.currentNode);
                }
            }

            drawTreeRecursive(ctx, node, state) {
                if (!node) return;
                
                // ç»˜åˆ¶è¿çº¿
                if (node.left) {
                    ctx.beginPath();
                    ctx.moveTo(node.x, node.y + node.radius);
                    ctx.lineTo(node.left.x, node.left.y - node.left.radius);
                    ctx.strokeStyle = '#666';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                
                if (node.right) {
                    ctx.beginPath();
                    ctx.moveTo(node.x, node.y + node.radius);
                    ctx.lineTo(node.right.x, node.right.y - node.right.radius);
                    ctx.strokeStyle = '#666';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                
                // ç»˜åˆ¶å­èŠ‚ç‚¹
                this.drawTreeRecursive(ctx, node.left, state);
                this.drawTreeRecursive(ctx, node.right, state);
                
                // ç»˜åˆ¶å½“å‰èŠ‚ç‚¹
                this.drawNode(ctx, node, state);
            }

            drawNode(ctx, node, state) {
                // è®¾ç½®èŠ‚ç‚¹é¢œè‰²
                let fillColor = '#FFFFFF';
                if (node.state === 'current') {
                    fillColor = '#FFA726';
                } else if (node.state === 'visited') {
                    fillColor = '#C8E6C9';
                }
                
                // ç»˜åˆ¶èŠ‚ç‚¹åœ†
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                ctx.fillStyle = fillColor;
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // ç»˜åˆ¶èŠ‚ç‚¹å€¼
                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.value, node.x, node.y);
            }

            drawPointer(ctx, node) {
                // ç»˜åˆ¶æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‰è§’å½¢æŒ‡é’ˆ
                ctx.beginPath();
                ctx.moveTo(node.x, node.y - node.radius - 15);
                ctx.lineTo(node.x - 10, node.y - node.radius - 5);
                ctx.lineTo(node.x + 10, node.y - node.radius - 5);
                ctx.closePath();
                ctx.fillStyle = '#FF5722';
                ctx.fill();
                
                // æ·»åŠ æŒ‡é’ˆåŠ¨ç”»æ•ˆæœ
                ctx.beginPath();
                ctx.arc(node.x, node.y - node.radius - 10, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#FFF';
                ctx.fill();
            }

            updateCodeHighlight(traversalType) {
                const state = this.traversalStates[traversalType];
                const step = state.getCurrentStep();
                const codeContainer = document.getElementById(`${traversalType}-code`);
                
                // æ¸…é™¤æ‰€æœ‰é«˜äº®
                codeContainer.querySelectorAll('.code-line').forEach(line => {
                    line.classList.remove('highlighted');
                });
                
                // é«˜äº®å½“å‰ä»£ç è¡Œ
                if (step && step.codeLine
<!--æ£€æµ‹åˆ°ä»£ç æˆªæ–­ï¼Œè‡ªåŠ¨ç»­å†™ä¸­...-->
) {
                    const lines = codeContainer.querySelectorAll('.code-line');
                    if (step.codeLine - 1 < lines.length) {
                        lines[step.codeLine - 1].classList.add('highlighted');
                    }
                }
            }

            updateStackVisualization(traversalType) {
                const state = this.traversalStates[traversalType];
                const stackContainer = document.getElementById(`${traversalType}-stack`);
                
                // æ¸…ç©ºæ ˆæ˜¾ç¤º
                stackContainer.innerHTML = '';
                
                // æ˜¾ç¤ºæ ˆå¸§ï¼ˆä»æ ˆåº•åˆ°æ ˆé¡¶ï¼‰
                const stackFrames = [...state.callStack].reverse();
                
                stackFrames.forEach((frame, index) => {
                    const frameElement = document.createElement('div');
                    frameElement.className = 'stack-frame';
                    
                    // æœ€åä¸€ä¸ªæ ˆå¸§æ˜¯æ´»åŠ¨çš„
                    if (index === 0) {
                        frameElement.classList.add('active');
                    }
                    
                    frameElement.textContent = `${frame.node.value} (ä¸‹ä¸€æ­¥: ${frame.nextAction})`;
                    stackContainer.appendChild(frameElement);
                });
                
                // å¦‚æœæ ˆä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤º
                if (stackFrames.length === 0) {
                    const emptyFrame = document.createElement('div');
                    emptyFrame.className = 'stack-frame';
                    emptyFrame.textContent = 'è°ƒç”¨æ ˆä¸ºç©º';
                    stackContainer.appendChild(emptyFrame);
                }
            }

            updateSequenceVisualization(traversalType) {
                const state = this.traversalStates[traversalType];
                const sequenceContainer = document.getElementById(`${traversalType}-sequence`);
                
                // æ¸…ç©ºåºåˆ—æ˜¾ç¤º
                sequenceContainer.innerHTML = '';
                
                // æ˜¾ç¤ºè®¿é—®åºåˆ—
                state.visitedSequence.forEach((value, index) => {
                    const nodeElement = document.createElement('div');
                    nodeElement.className = 'sequence-node';
                    
                    // æœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ–°è®¿é—®çš„
                    if (index === state.visitedSequence.length - 1) {
                        nodeElement.classList.add('new');
                    }
                    
                    nodeElement.textContent = value;
                    sequenceContainer.appendChild(nodeElement);
                    
                    // æ·»åŠ ç®­å¤´ï¼ˆé™¤äº†æœ€åä¸€ä¸ªï¼‰
                    if (index < state.visitedSequence.length - 1) {
                        const arrow = document.createElement('span');
                        arrow.textContent = 'â†’';
                        arrow.style.color = '#666';
                        arrow.style.margin = '0 5px';
                        sequenceContainer.appendChild(arrow);
                    }
                });
                
                // å¦‚æœåºåˆ—ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤º
                if (state.visitedSequence.length === 0) {
                    const emptyText = document.createElement('div');
                    emptyText.textContent = 'å°šæœªè®¿é—®ä»»ä½•èŠ‚ç‚¹';
                    emptyText.style.color = '#999';
                    emptyText.style.fontStyle = 'italic';
                    sequenceContainer.appendChild(emptyText);
                }
            }

            render() {
                // æ›´æ–°æ‰€æœ‰è§†å›¾
                const traversals = this.compareMode ? 
                    ['preorder', 'inorder', 'postorder'] : 
                    [this.currentTraversal];
                
                traversals.forEach(traversalType => {
                    // ç»˜åˆ¶æ ‘
                    this.drawTree(`${traversalType}-canvas`, traversalType);
                    
                    // æ›´æ–°ä»£ç é«˜äº®
                    this.updateCodeHighlight(traversalType);
                    
                    // æ›´æ–°æ ˆå¯è§†åŒ–
                    this.updateStackVisualization(traversalType);
                    
                    // æ›´æ–°åºåˆ—å¯è§†åŒ–
                    this.updateSequenceVisualization(traversalType);
                });
                
                // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                this.updateStatus();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            const visualizer = new BinaryTreeVisualizer();
            
            // åˆå§‹æ¸²æŸ“
            visualizer.render();
            
            // å°†visualizeræš´éœ²ç»™å…¨å±€ï¼Œä¾¿äºè°ƒè¯•
            window.visualizer = visualizer;
        });
    </script>
</body>
</html>


### 3. è¿‡ç¨‹è¾“å‡º

### 3. ä½¿ç”¨æŒ‡å—

## ğŸŒ³ äºŒå‰æ ‘éå†é€’å½’è¿‡ç¨‹å¯è§†åŒ– - äº¤äº’å¼æ•™å­¦åŠ¨ç”»ä½¿ç”¨æŒ‡å—

æ¬¢è¿ä½¿ç”¨â€œäºŒå‰æ ‘éå†é€’å½’è¿‡ç¨‹å¯è§†åŒ–â€æ•™å­¦åŠ¨ç”»ï¼æœ¬å·¥å…·æ—¨åœ¨é€šè¿‡ç›´è§‚ã€åŠ¨æ€çš„æ–¹å¼ï¼Œå¸®åŠ©æ‚¨æ·±å…¥ç†è§£äºŒå‰æ ‘å‰åºã€ä¸­åºã€ååºéå†çš„é€’å½’è¿‡ç¨‹ã€æŒ‡é’ˆç§»åŠ¨ä¸è°ƒç”¨æ ˆæœºåˆ¶ã€‚

---

### ğŸ“‹ åŠŸèƒ½è¯´æ˜

æœ¬åŠ¨ç”»å°†æŠ½è±¡çš„é€’å½’éå†è¿‡ç¨‹åˆ†è§£ä¸ºå¯è§†åŒ–çš„å››ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š
1. **æ ‘ç»“æ„è§†å›¾**ï¼šå®æ—¶æ˜¾ç¤ºäºŒå‰æ ‘ï¼ŒåŠ¨æ€é«˜äº®å½“å‰èŠ‚ç‚¹
2. **ä»£ç æ‰§è¡Œè§†å›¾**ï¼šåŒæ­¥é«˜äº®æ­£åœ¨æ‰§è¡Œçš„ä»£ç è¡Œ
3. **é€’å½’è°ƒç”¨æ ˆè§†å›¾**ï¼šå¯è§†åŒ–å±•ç¤ºé€’å½’è°ƒç”¨çš„å‹æ ˆä¸å¼¹æ ˆè¿‡ç¨‹
4. **è®¿é—®åºåˆ—è§†å›¾**ï¼šå®æ—¶è®°å½•å¹¶æ˜¾ç¤ºèŠ‚ç‚¹è®¿é—®é¡ºåº

### ğŸ¯ ä¸»è¦åŠŸèƒ½

#### 1. **æ ‘ç»“æ„é€‰æ‹©**
- **å¹³è¡¡äºŒå‰æ ‘**ï¼šæ ‡å‡†å¯¹ç§°ç»“æ„ï¼Œé€‚åˆåŸºç¡€å­¦ä¹ 
- **å·¦æ–œæ ‘**ï¼šæ‰€æœ‰èŠ‚ç‚¹åªæœ‰å·¦å­æ ‘ï¼Œå±•ç¤ºæç«¯æƒ…å†µ
- **å³æ–œæ ‘**ï¼šæ‰€æœ‰èŠ‚ç‚¹åªæœ‰å³å­æ ‘ï¼Œå±•ç¤ºæç«¯æƒ…å†µ
- **æ™®é€šäºŒå‰æ ‘**ï¼šéå¯¹ç§°ç»“æ„ï¼Œæ¨¡æ‹Ÿå®é™…åº”ç”¨åœºæ™¯

#### 2. **éå†æ¨¡å¼**
- **å‰åºéå† (Vâ†’Lâ†’R)**ï¼šå…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œå†éå†å·¦å³å­æ ‘
- **ä¸­åºéå† (Lâ†’Vâ†’R)**ï¼šå…ˆéå†å·¦å­æ ‘ï¼Œå†è®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åéå†å³å­æ ‘
- **ååºéå† (Lâ†’Râ†’V)**ï¼šå…ˆéå†å·¦å³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹
- **å¯¹æ¯”æ¨¡å¼**ï¼šåŒæ—¶å±•ç¤ºä¸‰ç§éå†è¿‡ç¨‹ï¼Œç›´è§‚æ¯”è¾ƒå·®å¼‚

#### 3. **åŠ¨ç”»æ§åˆ¶**
- **å¼€å§‹/æš‚åœ**ï¼šå¯åŠ¨æˆ–æš‚åœåŠ¨ç”»æ’­æ”¾
- **ä¸‹ä¸€æ­¥**ï¼šå•æ­¥æ‰§è¡Œä¸‹ä¸€ä¸ªåŠ¨ä½œï¼ˆè¿›å…¥èŠ‚ç‚¹ã€è®¿é—®èŠ‚ç‚¹ã€è¿›å…¥å³å­æ ‘ã€è¿”å›ï¼‰
- **ä¸Šä¸€æ­¥**ï¼šå›é€€åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€
- **é‡ç½®**ï¼šæ¢å¤åˆ°åˆå§‹çŠ¶æ€
- **é€Ÿåº¦è°ƒèŠ‚**ï¼šä»æ…¢é€Ÿåˆ°å¿«é€Ÿï¼ˆ1-10æ¡£ï¼‰

### âœ¨ è®¾è®¡ç‰¹è‰²

#### 1. **åŒé‡è§†è§’åŒæ­¥**
- **è§†è§‰åŒæ­¥**ï¼šæ ‘è§†å›¾ä¸­çš„èŠ‚ç‚¹é«˜äº®ä¸ä»£ç è§†å›¾ä¸­çš„è¡Œé«˜äº®å®Œå…¨åŒæ­¥
- **çŠ¶æ€åŒæ­¥**ï¼šå½“å‰èŠ‚ç‚¹ã€è°ƒç”¨æ ˆã€è®¿é—®åºåˆ—ä¸‰è€…çŠ¶æ€å®æ—¶ä¸€è‡´

#### 2. **é€’å½’è¿‡ç¨‹é€æ˜åŒ–**
- **è°ƒç”¨æ ˆå¯è§†åŒ–**ï¼šå°†éšå¼çš„ç³»ç»Ÿè°ƒç”¨æ ˆæ˜¾å¼å±•ç¤ºä¸ºå †å çš„æ–¹å—
- **æ‰§è¡ŒçŠ¶æ€æ ‡è®°**ï¼šæ¯ä¸ªæ ˆå¸§æ˜¾ç¤ºâ€œä¸‹ä¸€æ­¥åŠ¨ä½œâ€ï¼ˆV/L/Rï¼‰ï¼Œæ˜ç¡®ç¨‹åºæ‰§è¡Œä½ç½®

#### 3. **è®¤çŸ¥å‹å¥½çš„è§†è§‰ç¼–ç **
- **é¢œè‰²è¯­ä¹‰åŒ–**ï¼š
  - ğŸŸ  æ©™è‰²ï¼šå½“å‰èŠ‚ç‚¹ï¼ˆæ­£åœ¨å¤„ç†ï¼‰
  - ğŸŸ¢ æµ…ç»¿ï¼šå·²è®¿é—®èŠ‚ç‚¹ï¼ˆå·²å®Œæˆï¼‰
  - â¬œ ç™½è‰²ï¼šæœªè®¿é—®èŠ‚ç‚¹ï¼ˆå¾…å¤„ç†ï¼‰
  - ğŸŸ¦ è“è‰²é«˜äº®ï¼šæ´»åŠ¨æ ˆå¸§
  - ğŸŸ¡ æµ…é»„é«˜äº®ï¼šå½“å‰æ‰§è¡Œä»£ç è¡Œ

#### 4. **çµæ´»çš„å­¦ä¹ æ¨¡å¼**
- **å•æ­¥å­¦ä¹ æ¨¡å¼**ï¼šé€‚åˆåˆæ¬¡å­¦ä¹ è€…ï¼Œå¯æ§åˆ¶èŠ‚å¥ä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥
- **è¿ç»­æ’­æ”¾æ¨¡å¼**ï¼šé€‚åˆå¤ä¹ å·©å›ºï¼Œå½¢æˆæ•´ä½“æµç¨‹è®¤çŸ¥
- **å¯¹æ¯”å­¦ä¹ æ¨¡å¼**ï¼šé€‚åˆæ·±å…¥ç†è§£ä¸‰ç§éå†çš„æœ¬è´¨å·®å¼‚

### ğŸ§  æ•™å­¦è¦ç‚¹

#### æ ¸å¿ƒæ¦‚å¿µè§£æ
1. **é€’å½’çš„æœ¬è´¨**ï¼šæ¯æ¬¡é€’å½’è°ƒç”¨å¯¹åº”ä¸€ä¸ªæ ˆå¸§çš„å‹å…¥ï¼Œè¿”å›å¯¹åº”æ ˆå¸§çš„å¼¹å‡º
2. **ä¸‰ç§éå†çš„åŒºåˆ«**ï¼š
   - **å‰åº**ï¼šåˆ°è¾¾èŠ‚ç‚¹ç«‹å³è®¿é—®ï¼ˆVåœ¨Lã€Rä¹‹å‰ï¼‰
   - **ä¸­åº**ï¼šä»å·¦å­æ ‘è¿”å›åè®¿é—®ï¼ˆVåœ¨Lä¹‹åã€Rä¹‹å‰ï¼‰
   - **ååº**ï¼šä»å³å­æ ‘è¿”å›åè®¿é—®ï¼ˆVåœ¨Lã€Rä¹‹åï¼‰
3. **â€œæŒ‡é’ˆâ€çš„å«ä¹‰**ï¼šåŠ¨ç”»ä¸­çš„â€œæŒ‡é’ˆâ€ä»£è¡¨å½“å‰é€’å½’è°ƒç”¨å…³æ³¨çš„èŠ‚ç‚¹ï¼Œå³ç¨‹åºæ‰§è¡Œæµçš„ä½ç½®

#### å…³é”®è§‚å¯Ÿç‚¹
1. **æ ˆå¸§ç”Ÿå‘½å‘¨æœŸ**ï¼šæ³¨æ„æ ˆå¸§ä½•æ—¶å‹å…¥ï¼ˆè¿›å…¥é€’å½’ï¼‰ã€ä½•æ—¶å¼¹å‡ºï¼ˆè¿”å›ï¼‰
2. **èŠ‚ç‚¹çŠ¶æ€è½¬æ¢**ï¼šè§‚å¯ŸèŠ‚ç‚¹å¦‚ä½•ä»â€œæœªè®¿é—®â€â†’â€œå½“å‰â€â†’â€œå·²è®¿é—®â€
3. **ä»£ç æ‰§è¡Œé¡ºåº**ï¼šå¯¹ç…§ä»£ç é«˜äº®ï¼Œç†è§£ä¸åŒéå†çš„æ‰§è¡Œè·¯å¾„å·®å¼‚
4. **è®¿é—®åºåˆ—ç”Ÿæˆ**ï¼šæ³¨æ„è®¿é—®åºåˆ—ä¸èŠ‚ç‚¹è®¿é—®åŠ¨ä½œçš„å¯¹åº”å…³ç³»

### ğŸ’¡ ä½¿ç”¨å»ºè®®

#### å­¦ä¹ è·¯å¾„å»ºè®®
1. **ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è®¤çŸ¥**
   - é€‰æ‹©â€œå¹³è¡¡äºŒå‰æ ‘â€å’Œâ€œå‰åºéå†â€
   - ä½¿ç”¨â€œå•æ­¥æ¨¡å¼â€ï¼Œä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–
   - é‡ç‚¹å…³æ³¨ï¼šèŠ‚ç‚¹çŠ¶æ€å˜åŒ–ã€è°ƒç”¨æ ˆå˜åŒ–ã€ä»£ç æ‰§è¡Œä½ç½®

2. **ç¬¬äºŒé˜¶æ®µï¼šå¯¹æ¯”ç†è§£**
   - å¼€å¯â€œå¯¹æ¯”æ¨¡å¼â€ï¼Œè§‚å¯Ÿä¸‰ç§éå†çš„å·®å¼‚
   - æ³¨æ„ç›¸åŒèŠ‚ç‚¹åœ¨ä¸åŒéå†ä¸­çš„è®¿é—®æ—¶æœº
   - æ€è€ƒï¼šä¸ºä»€ä¹ˆè®¿é—®é¡ºåºä¸åŒï¼Ÿä»£ç å·®å¼‚åœ¨å“ªé‡Œï¼Ÿ

3. **ç¬¬ä¸‰é˜¶æ®µï¼šæ·±å…¥æ¢ç©¶**
   - å°è¯•ä¸åŒçš„æ ‘ç»“æ„ï¼ˆç‰¹åˆ«æ˜¯æ–œæ ‘ï¼‰
   - è§‚å¯Ÿæç«¯æƒ…å†µä¸‹çš„éå†è¿‡ç¨‹
   - æ€è€ƒï¼šæ ‘çš„ç»“æ„å¦‚ä½•å½±å“éå†æ•ˆç‡ï¼Ÿ

4. **ç¬¬å››é˜¶æ®µï¼šè‡ªæˆ‘æµ‹è¯•**
   - å…³é—­åŠ¨ç”»ï¼Œæ‰‹åŠ¨æ¨å¯¼éå†åºåˆ—
   - å†ç”¨åŠ¨ç”»éªŒè¯è‡ªå·±çš„æ¨å¯¼
   - å°è¯•è§£é‡Šæ¯ä¸€æ­¥çš„æ ˆçŠ¶æ€å˜åŒ–

#### æ•™å­¦åº”ç”¨å»ºè®®
- **è¯¾å ‚æ¼”ç¤º**ï¼šä½¿ç”¨â€œè¿ç»­æ’­æ”¾â€æ¨¡å¼è¿›è¡Œæ•´ä½“æµç¨‹æ¼”ç¤º
- **å°ç»„è®¨è®º**ï¼šä½¿ç”¨â€œå•æ­¥æ¨¡å¼â€ï¼Œåœ¨å…³é”®æ­¥éª¤æš‚åœï¼Œå¼•å¯¼å­¦ç”Ÿé¢„æµ‹ä¸‹ä¸€æ­¥
- **è¯¾åç»ƒä¹ **ï¼šè®©å­¦ç”Ÿä½¿ç”¨ä¸åŒæ ‘ç»“æ„å’Œéå†æ¨¡å¼ï¼Œè®°å½•è§‚å¯Ÿç»“æœ
- **æ¦‚å¿µå¼ºåŒ–**ï¼šé‡ç‚¹è®²è§£â€œå¯¹æ¯”æ¨¡å¼â€ä¸‹çš„å·®å¼‚ï¼Œå¼ºåŒ–ä¸‰ç§éå†çš„æœ¬è´¨åŒºåˆ«

#### è°ƒè¯•ä¸æ¢ç´¢
- å¦‚æœå¯¹æŸä¸€æ­¥ä¸ç†è§£ï¼Œä½¿ç”¨â€œä¸Šä¸€æ­¥â€åŠŸèƒ½å›é€€é‡æ–°è§‚å¯Ÿ
- è°ƒæ•´åŠ¨ç”»é€Ÿåº¦ï¼Œæ‰¾åˆ°æœ€é€‚åˆè‡ªå·±è®¤çŸ¥èŠ‚å¥çš„é€Ÿåº¦
- åœ¨ä¸åŒæ ‘ç»“æ„é—´åˆ‡æ¢ï¼Œè§‚å¯Ÿç›¸åŒéå†ç®—æ³•åœ¨ä¸åŒç»“æ„ä¸Šçš„è¡¨ç°

---

### ğŸš€ å¼€å§‹æ¢ç´¢å§ï¼

ç°åœ¨ï¼Œæ‚¨å·²ç»æŒæ¡äº†æœ¬æ•™å­¦åŠ¨ç”»çš„æ‰€æœ‰åŠŸèƒ½ã€‚å»ºè®®æ‚¨ï¼š

1. ä»â€œå¹³è¡¡äºŒå‰æ ‘â€å’Œâ€œå‰åºéå†â€å¼€å§‹
2. ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼Œä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–
3. å½“æ‚¨ç†Ÿæ‚‰åŸºæœ¬æµç¨‹åï¼Œå°è¯•å…¶ä»–æ ‘ç»“æ„å’Œéå†æ¨¡å¼
4. æœ€åå¼€å¯â€œå¯¹æ¯”æ¨¡å¼â€ï¼Œä½“éªŒä¸‰ç§éå†çš„åŒæ­¥å±•ç¤º

é€šè¿‡è¿™ä¸ªäº¤äº’å¼åŠ¨ç”»ï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š
- âœ… ç›´è§‚ç†è§£é€’å½’éå†çš„æ‰§è¡Œè¿‡ç¨‹
- âœ… æ¸…æ™°åˆ†è¾¨ä¸‰ç§éå†çš„æœ¬è´¨å·®å¼‚
- âœ… æŒæ¡è°ƒç”¨æ ˆåœ¨é€’å½’ä¸­çš„ä½œç”¨
- âœ… å»ºç«‹äºŒå‰æ ‘éå†çš„å®Œæ•´å¿ƒæ™ºæ¨¡å‹

ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼Œæ¢ç´¢æˆåŠŸï¼ ğŸŒŸ

> **æç¤º**ï¼šæœ¬å·¥å…·å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ— éœ€å®‰è£…ä»»ä½•æ’ä»¶ã€‚å»ºè®®ä½¿ç”¨Chromeã€Firefoxæˆ–Edgeç­‰ç°ä»£æµè§ˆå™¨ä»¥è·å¾—æœ€ä½³ä½“éªŒã€‚