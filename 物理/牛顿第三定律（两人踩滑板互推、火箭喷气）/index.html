<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹äº¤äº’æ•™å­¦åŠ¨ç”»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        header {
            text-align: center;
            padding: 20px;
            background: #2A5CAA;
            color: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(42, 92, 170, 0.2);
        }

        h1 {
            font-size: 2.4rem;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }

        .animation-section {
            flex: 3;
            min-width: 300px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }

        .canvas-container {
            flex: 1;
            position: relative;
            background: #f9fbfd;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e1e8f0;
            margin-bottom: 20px;
        }

        #animationCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .scene-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .scene-btn {
            flex: 1;
            min-width: 140px;
            padding: 14px 20px;
            background: #eef2f7;
            border: 2px solid #d0dbe8;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: #2A5CAA;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .scene-btn:hover {
            background: #e1e9f3;
            transform: translateY(-2px);
        }

        .scene-btn.active {
            background: #2A5CAA;
            color: white;
            border-color: #2A5CAA;
            box-shadow: 0 4px 12px rgba(42, 92, 170, 0.3);
        }

        .control-panel {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .panel-section {
            background: #f9fbfd;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #2A5CAA;
        }

        h2 {
            color: #2A5CAA;
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2 i {
            font-style: normal;
            background: #2A5CAA;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 20px;
            background: #2A5CAA;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        button:hover {
            background: #1e4a8a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(42, 92, 170, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #eef2f7;
            color: #2A5CAA;
        }

        button.secondary:hover {
            background: #e1e9f3;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .checkbox-item:hover {
            background: #eef2f7;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #2A5CAA;
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            font-weight: 500;
            color: #444;
        }

        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            font-weight: 500;
            color: #444;
        }

        .slider-value {
            color: #2A5CAA;
            font-weight: 600;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #e1e8f0;
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: #2A5CAA;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .law-statement {
            background: linear-gradient(135deg, #2A5CAA 0%, #1e4a8a 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 10px;
            box-shadow: 0 6px 15px rgba(42, 92, 170, 0.3);
        }

        .law-statement h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .law-statement h3:before {
            content: "ğŸ“˜";
            font-size: 1.5rem;
        }

        .law-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .law-equation {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            margin: 15px 0;
            font-family: 'Cambria', 'Times New Roman', serif;
        }

        .law-properties {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .property {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .property .title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1rem;
        }

        .property .desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .info-panel {
            background: #fff9e6;
            border-left: 4px solid #FF6B35;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .info-panel h4 {
            color: #FF6B35;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-panel h4:before {
            content: "ğŸ’¡";
        }

        .info-text {
            line-height: 1.6;
            color: #666;
        }

        .highlight {
            color: #FF6B35;
            font-weight: 600;
        }

        .force-color-key {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .color-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .color-label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #e1e8f0;
            width: 100%;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .scene-btn {
                min-width: 100%;
            }
            
            button {
                min-width: 100%;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹äº¤äº’æ•™å­¦åŠ¨ç”»</h1>
            <p class="subtitle">ä½œç”¨åŠ›ä¸åä½œç”¨åŠ›ï¼šç­‰å¤§ã€åå‘ã€å…±çº¿ã€ä½œç”¨åœ¨ä¸åŒç‰©ä½“ä¸Š</p>
        </header>

        <div class="main-content">
            <section class="animation-section">
                <div class="scene-selector">
                    <button class="scene-btn active" data-scene="skateboard">ğŸ‚ æ»‘æ¿äº’æ¨åœºæ™¯</button>
                    <button class="scene-btn" data-scene="rocket">ğŸš€ ç«ç®­å–·æ°”åœºæ™¯</button>
                </div>
                
                <div class="canvas-container">
                    <canvas id="animationCanvas" width="800" height="500"></canvas>
                </div>
                
                <div class="force-color-key">
                    <div class="color-item">
                        <div class="color-box" style="background-color: #FF6B35;"></div>
                        <span class="color-label">ä½œç”¨åŠ› (F<sub>Aâ†’B</sub>)</span>
                    </div>
                    <div class="color-item">
                        <div class="color-box" style="background-color: #1A6DFF;"></div>
                        <span class="color-label">åä½œç”¨åŠ› (F<sub>Bâ†’A</sub>)</span>
                    </div>
                    <div class="color-item">
                        <div class="color-box" style="background: linear-gradient(90deg, #FF6B35, #1A6DFF); border: 1px solid #ddd;"></div>
                        <span class="color-label">ä½œç”¨åŠ›ä¸åä½œç”¨åŠ›å¤§å°ç›¸ç­‰</span>
                    </div>
                </div>
            </section>

            <section class="control-panel">
                <div class="panel-section">
                    <h2><i>1</i> åŠ¨ç”»æ§åˆ¶</h2>
                    <div class="controls">
                        <div class="btn-group">
                            <button id="resetBtn">é‡ç½®</button>
                            <button id="playPauseBtn">æ’­æ”¾</button>
                            <button id="stepBtn" class="secondary">ä¸‹ä¸€æ­¥</button>
                        </div>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="showForces" checked>
                                <label for="showForces">æ˜¾ç¤ºåŠ›ç®­å¤´</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="showLabels" checked>
                                <label for="showLabels">æ˜¾ç¤ºåŠ›æ ‡ç­¾</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="highlightPair" checked>
                                <label for="highlightPair">é«˜äº®ä½œç”¨åŠ›ä¸åä½œç”¨åŠ›é…å¯¹</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-section" id="skateboardControls">
                    <h2><i>2</i> æ»‘æ¿åœºæ™¯å‚æ•°</h2>
                    <div class="controls">
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>äººå‘˜Aä¸Bçš„è´¨é‡æ¯”</span>
                                <span class="slider-value" id="massRatioValue">1:1</span>
                            </div>
                            <input type="range" id="massRatioSlider" min="1" max="3" value="2" step="1">
                            <div class="slider-label" style="justify-content: space-between; margin-top: 5px;">
                                <span>è´¨é‡A < è´¨é‡B</span>
                                <span>è´¨é‡A = è´¨é‡B</span>
                                <span>è´¨é‡A > è´¨é‡B</span>
                            </div>
                        </div>
                        <div class="info-panel">
                            <h4>è§‚å¯Ÿä¸æ€è€ƒ</h4>
                            <p class="info-text">æ”¹å˜è´¨é‡æ¯”åï¼Œæ³¨æ„è§‚å¯Ÿï¼šä½œç”¨åŠ›ä¸åä½œç”¨åŠ›å§‹ç»ˆ<span class="highlight">å¤§å°ç›¸ç­‰</span>ï¼Œä½†è´¨é‡ä¸åŒçš„ä¸¤äººè·å¾—çš„<span class="highlight">åŠ é€Ÿåº¦ä¸åŒ</span>ï¼ˆè¿åŠ¨é€Ÿåº¦ä¸åŒï¼‰ï¼Œè¿™ä½“ç°äº†ç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼ˆF=maï¼‰ä¸ç¬¬ä¸‰å®šå¾‹çš„ç»“åˆã€‚</p>
                        </div>
                    </div>
                </div>

                <div class="panel-section" id="rocketControls" style="display: none;">
                    <h2><i>2</i> ç«ç®­åœºæ™¯è¯´æ˜</h2>
                    <div class="controls">
                        <div class="info-panel">
                            <h4>åŸç†åˆ†æ</h4>
                            <p class="info-text">ç«ç®­å‘ä¸‹å–·å‡ºé«˜é€Ÿæ°”ä½“ï¼ˆæ–½åŠ ä½œç”¨åŠ›äºæ°”ä½“ï¼‰ï¼Œæ°”ä½“åŒæ—¶ç»™ç«ç®­ä¸€ä¸ªå‘ä¸Šçš„åä½œç”¨åŠ›ï¼Œæ¨åŠ¨ç«ç®­å‡ç©ºã€‚è¿™æ˜¯ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹åœ¨åå†²è¿åŠ¨ä¸­çš„å…¸å‹åº”ç”¨ã€‚</p>
                        </div>
                        <div class="info-panel">
                            <h4>å…³é”®ç‚¹</h4>
                            <p class="info-text">æ³¨æ„è§‚å¯Ÿï¼š<span class="highlight">ç«ç®­å¯¹æ°”ä½“çš„æ¨åŠ›</span>ä¸<span class="highlight">æ°”ä½“å¯¹ç«ç®­çš„æ¨åŠ›</span>æ€»æ˜¯å¤§å°ç›¸ç­‰ã€æ–¹å‘ç›¸åã€‚å³ä½¿åœ¨æ²¡æœ‰ç©ºæ°”çš„å¤ªç©ºä¸­ï¼Œç«ç®­ä¹Ÿèƒ½ä¾é å–·å‡ºè‡ªèº«æºå¸¦çš„å·¥è´¨ï¼ˆç‡ƒæ–™ç‡ƒçƒ§åçš„æ°”ä½“ï¼‰è·å¾—æ¨åŠ›ã€‚</p>
                        </div>
                    </div>
                </div>

                <div class="law-statement">
                    <h3>ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹</h3>
                    <p class="law-text">ä¸¤ä¸ªç‰©ä½“ä¹‹é—´çš„ä½œç”¨åŠ›å’Œåä½œç”¨åŠ›æ€»æ˜¯å¤§å°ç›¸ç­‰ï¼Œæ–¹å‘ç›¸åï¼Œä½œç”¨åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šã€‚</p>
                    <div class="law-equation">F<sub>Aâ†’B</sub> = -F<sub>Bâ†’A</sub></div>
                    <div class="law-properties">
                        <div class="property">
                            <div class="title">å¤§å°ç›¸ç­‰</div>
                            <div class="desc">ä½œç”¨åŠ›ä¸åä½œç”¨åŠ›å¤§å°å§‹ç»ˆç›¸åŒ</div>
                        </div>
                        <div class="property">
                            <div class="title">æ–¹å‘ç›¸å</div>
                            <div class="desc">ä¸¤ä¸ªåŠ›çš„æ–¹å‘æ­£å¥½ç›¸å</div>
                        </div>
                        <div class="property">
                            <div class="title">åŒæ—¶äº§ç”ŸåŒæ—¶æ¶ˆå¤±</div>
                            <div class="desc">æ²¡æœ‰å…ˆåé¡ºåºï¼ŒåŒæ—¶å­˜åœ¨</div>
                        </div>
                        <div class="property">
                            <div class="title">ä½œç”¨åœ¨ä¸åŒç‰©ä½“ä¸Š</div>
                            <div class="desc">è¿™æ˜¯ä¸å¹³è¡¡åŠ›çš„å…³é”®åŒºåˆ«</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <footer>
            <p>äº¤äº’æ•™å­¦åŠ¨ç”» | ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹ | è®¾è®¡åŸç†ï¼šä»å…·ä½“åˆ°æŠ½è±¡ï¼Œä»é™æ€åˆ°åŠ¨æ€</p>
            <p>æç¤ºï¼šå°è¯•è°ƒæ•´å‚æ•°å¹¶è§‚å¯ŸåŠ›çš„å˜åŒ–ï¼Œç†è§£ä½œç”¨åŠ›ä¸åä½œç”¨åŠ›çš„å…³ç³»</p>
        </footer>
    </div>

    <script>
        // è·å–Canvaså’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('animationCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®Canvaså®é™…å¤§å°ä¸æ˜¾ç¤ºå¤§å°ä¸€è‡´
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }
        
        // åˆå§‹è°ƒæ•´å¤§å°
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // åŠ¨ç”»çŠ¶æ€
        let currentScene = 'skateboard'; // 'skateboard' æˆ– 'rocket'
        let animationPlaying = false;
        let animationTime = 0;
        let animationStep = 0; // 0:å‡†å¤‡, 1:æ–½åŠ›, 2:åˆ†ç¦»è¿åŠ¨
        
        // æ˜¾ç¤ºæ§åˆ¶
        let showForces = true;
        let showLabels = true;
        let highlightPair = true;
        
        // æ»‘æ¿åœºæ™¯å‚æ•°
        let massRatio = 1; // 1: A<B, 2: A=B, 3: A>B
        let personA = { x: 0, y: 0, vx: 0, mass: 1, radius: 30, color: '#333' };
        let personB = { x: 0, y: 0, vx: 0, mass: 1, radius: 30, color: '#666' };
        
        // ç«ç®­åœºæ™¯å‚æ•°
        let rocket = { x: 0, y: 0, vy: 0, mass: 1, width: 60, height: 120, color: '#C0C0C0' };
        let exhaustParticles = [];
        
        // åœºæ™¯åˆ‡æ¢
        document.querySelectorAll('.scene-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.scene-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentScene = btn.dataset.scene;
                resetAnimation();
                
                // æ˜¾ç¤º/éšè—å¯¹åº”çš„æ§åˆ¶é¢æ¿
                if (currentScene === 'skateboard') {
                    document.getElementById('skateboardControls').style.display = 'block';
                    document.getElementById('rocketControls').style.display = 'none';
                } else {
                    document.getElementById('skateboardControls').style.display = 'none';
                    document.getElementById('rocketControls').style.display = 'block';
                }
            });
        });
        
        // æ§åˆ¶æŒ‰é’®
        document.getElementById('resetBtn').addEventListener('click', resetAnimation);
        document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
        document.getElementById('stepBtn').addEventListener('click', nextStep);
        
        // å¤é€‰æ¡†æ§åˆ¶
        document.getElementById('showForces').addEventListener('change', (e) => {
            showForces = e.target.checked;
        });
        
        document.getElementById('showLabels').addEventListener('change', (e) => {
            showLabels = e.target.checked;
        });
        
        document.getElementById('highlightPair').addEventListener('change', (e) => {
            highlightPair = e.target.checked;
        });
        
        // è´¨é‡æ¯”æ»‘å—
        const massRatioSlider = document.getElementById('massRatioSlider');
        const massRatioValue = document.getElementById('massRatioValue');
        
        massRatioSlider.addEventListener('input', (e) => {
            massRatio = parseInt(e.target.value);
            updateMassRatioDisplay();
            resetAnimation();
        });
        
        function updateMassRatioDisplay() {
            let ratioText = '';
            switch(massRatio) {
                case 1: ratioText = '1:2 (A<B)'; break;
                case 2: ratioText = '1:1 (A=B)'; break;
                case 3: ratioText = '2:1 (A>B)'; break;
            }
            massRatioValue.textContent = ratioText;
            
            // æ›´æ–°è´¨é‡å€¼
            switch(massRatio) {
                case 1: // A<B
                    personA.mass = 0.5;
                    personB.mass = 1;
                    personA.radius = 25;
                    personB.radius = 35;
                    break;
                case 2: // A=B
                    personA.mass = 1;
                    personB.mass = 1;
                    personA.radius = 30;
                    personB.radius = 30;
                    break;
                case 3: // A>B
                    personA.mass = 1;
                    personB.mass = 0.5;
                    personA.radius = 35;
                    personB.radius = 25;
                    break;
            }
        }
        
        // åˆå§‹åŒ–æ˜¾ç¤º
        updateMassRatioDisplay();
        
        // åŠ¨ç”»æ§åˆ¶å‡½æ•°
        function resetAnimation() {
            animationTime = 0;
            animationStep = 0;
            animationPlaying = false;
            document.getElementById('playPauseBtn').textContent = 'æ’­æ”¾';
            
            // é‡ç½®æ»‘æ¿åœºæ™¯
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            personA.x = centerX - 100;
            personB.x = centerX + 100;
            personA.y = personB.y = centerY;
            personA.vx = personB.vx = 0;
            
            // é‡ç½®ç«ç®­åœºæ™¯
            rocket.x = centerX;
            rocket.y = canvas.height - 150;
            rocket.vy = 0;
            exhaustParticles = [];
            
            draw();
        }
        
        function togglePlayPause() {
            animationPlaying = !animationPlaying;
            document.getElementById('playPauseBtn').textContent = animationPlaying ? 'æš‚åœ' : 'æ’­æ”¾';
            
            if (animationPlaying) {
                requestAnimationFrame(animate);
            }
        }
        
        function nextStep() {
            if (animationStep < 2) {
                animationStep++;
                animationTime = 0;
                draw();
            }
        }
        
        // ä¸»åŠ¨ç”»å¾ªç¯
        function animate(timestamp) {
            if (!animationPlaying) return;
            
            animationTime += 0.016; // çº¦60fps
            
            if (currentScene === 'skateboard') {
                updateSkateboardScene();
            } else {
                updateRocketScene();
            }
            
            draw();
            
            if (animationPlaying) {
                requestAnimationFrame(animate);
            }
        }
        
        function updateSkateboardScene() {
            const centerX = canvas.width / 2;
            const forceMagnitude = 0.5;
            
            // æ ¹æ®æ­¥éª¤æ›´æ–°çŠ¶æ€
            if (animationStep === 0) {
                // å‡†å¤‡é˜¶æ®µï¼šä¸¤äººé è¿‘
                if (personA.x < centerX - 50) personA.x += 1;
                if (personB.x > centerX + 50) personB.x -= 1;
            } else if (animationStep === 1) {
                // æ–½åŠ›é˜¶æ®µï¼šæ˜¾ç¤ºåŠ›ï¼Œå¼€å§‹è¿åŠ¨
                if (animationTime < 1.0) {
                    // æ–½åŠ›è¿‡ç¨‹
                } else {
                    animationStep = 2;
                }
            } else if (animationStep === 2) {
                // åˆ†ç¦»è¿åŠ¨é˜¶æ®µï¼šæ ¹æ®ç‰›é¡¿ç¬¬äºŒå®šå¾‹è®¡ç®—åŠ é€Ÿåº¦
                // F = ma => a = F/m
                const force = forceMagnitude;
                const aA = force / personA.mass * 0.05;
                const aB = -force / personB.mass * 0.05;
                
                personA.vx += aA;
                personB.vx += aB;
                
                personA.x += personA.vx;
                personB.x += personB.vx;
                
                // å¦‚æœç§»å‡ºç”»é¢ï¼Œé‡ç½®ä½ç½®
                if (personA.x < -100 || personB.x > canvas.width + 100) {
                    resetAnimation();
                }
            }
            
            // è‡ªåŠ¨æ¨è¿›æ­¥éª¤
            if (animationStep === 0 && personA.x >= centerX - 50 && personB.x <= centerX + 50) {
                animationStep = 1;
                animationTime = 0;
            }
        }
        
        function updateRocketScene() {
            const forceMagnitude = 0.3;
            
            if (animationStep === 0) {
                // å‡†å¤‡é˜¶æ®µï¼šç«ç®­é™æ­¢
                if (animationTime > 1.0) {
                    animationStep = 1;
                    animationTime = 0;
                }
            } else if (animationStep === 1) {
                // å–·æ°”é˜¶æ®µï¼šç«ç®­åŠ é€Ÿä¸Šå‡
                // ç«ç®­å¯¹æ°”ä½“çš„åŠ›å‘ä¸‹ï¼Œæ°”ä½“å¯¹ç«ç®­çš„åŠ›å‘ä¸Š
                const force = forceMagnitude;
                const acceleration = force / rocket.mass * 0.05;
                
                rocket.vy -= acceleration; // å‘ä¸Šä¸ºè´Ÿ
                rocket.y += rocket.vy;
                
                // æ·»åŠ å°¾æ°”ç²’å­
                if (animationTime < 3.0) {
                    for (let i = 0; i < 3; i++) {
                        exhaustParticles.push({
                            x: rocket.x + (Math.random() - 0.5) * 30,
                            y: rocket.y + rocket.height / 2 + 10,
                            vx: (Math.random() - 0.5) * 2,
                            vy: 2 + Math.random() * 3,
                            size: 5 + Math.random() * 8,
                            life: 1.0
                        });
                    }
                } else {
                    animationStep = 2;
                }
                
                // æ›´æ–°ç²’å­
                for (let i = exhaustParticles.length - 1; i >= 0; i--) {
                    const p = exhaustParticles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.life -= 0.02;
                    
                    if (p.life <= 0) {
                        exhaustParticles.splice(i, 1);
                    }
                }
            } else if (animationStep === 2) {
                // æƒ¯æ€§ä¸Šå‡é˜¶æ®µï¼šåœæ­¢å–·æ°”ï¼Œæƒ¯æ€§ä¸Šå‡
                rocket.y += rocket.vy;
                rocket.vy += 0.01; // æ¨¡æ‹Ÿå¾®å°é‡åŠ›
                
                // å¦‚æœç«ç®­é£å‡ºç”»é¢ï¼Œé‡ç½®
                if (rocket.y < -200) {
                    resetAnimation();
                }
            }
        }
        
        // ç»˜åˆ¶å‡½æ•°
        function draw() {
            // æ¸…é™¤ç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶èƒŒæ™¯
            drawBackground();
            
            // æ ¹æ®å½“å‰åœºæ™¯ç»˜åˆ¶
            if (currentScene === 'skateboard') {
                drawSkateboardScene();
            } else {
                drawRocketScene();
            }
            
            // ç»˜åˆ¶æ­¥éª¤æŒ‡ç¤ºå™¨
            drawStepIndicator();
        }
        
        function drawBackground() {
            // ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯
            ctx.strokeStyle = '#e1e8f0';
            ctx.lineWidth = 1;
            
            const gridSize = 40;
            const offsetX = 0;
            const offsetY = 0;
            
            // å‚ç›´çº¿
            for (let x = offsetX; x < canvas.width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // æ°´å¹³çº¿
            for (let y = offsetY; y < canvas.height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶ä¸­å¿ƒçº¿
            ctx.strokeStyle = '#2A5CAA';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        function drawSkateboardScene() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // ç»˜åˆ¶åœ°é¢
            ctx.fillStyle = '#8B7355';
            ctx.fillRect(0, centerY + 50, canvas.width, canvas.height - (centerY + 50));
            
            // ç»˜åˆ¶æ»‘æ¿
            ctx.fillStyle = '#444';
            ctx.fillRect(personA.x - 40, personA.y + 25, 80, 10);
            ctx.fillRect(personB.x - 40, personB.y + 25, 80, 10);
            
            // ç»˜åˆ¶è½®å­
            ctx.fillStyle = '#222';
            for (let i = -1; i <= 1; i += 2) {
                ctx.beginPath();
                ctx.arc(personA.x + i * 30, personA.y + 35, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(personB.x + i * 30, personB.y + 35, 8, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶äººç‰©A
            ctx.fillStyle = personA.color;
            ctx.beginPath();
            ctx.arc(personA.x, personA.y, personA.radius, 0, Math.PI * 2);
            ctx.fill();
            
            // ç»˜åˆ¶äººç‰©B
            ctx.fillStyle = personB.color;
            ctx.beginPath();
            ctx.arc(personB.x, personB.y, personB.radius, 0, Math.PI * 2);
            ctx.fill();
            
            // ç»˜åˆ¶åŠ›ç®­å¤´
            if (showForces && animationStep >= 1) {
                const forceLength = 80;
                
                // äººç‰©Aå¯¹Bçš„åŠ› (å‘å³)
                drawForceArrow(
                    personA.x + personA.radius, personA.y,
                    personA.x + personA.radius + forceLength, personA.y,
                    '#FF6B35',
                    showLabels ? 'F_Aâ†’B (ä½œç”¨åŠ›)' : ''
                );
                
                // äººç‰©Bå¯¹Açš„åŠ› (å‘å·¦)
                drawForceArrow(
                    personB.x - personB.radius, personB.y,
                    personB.x - personB.radius - forceLength, personB.y,
                    '#1A6DFF',
                    showLabels ? 'F_Bâ†’A (åä½œç”¨åŠ›)' : ''
                );
                
                // é«˜äº®é…å¯¹
                if (highlightPair) {
                    ctx.strokeStyle = 'rgba(255, 107, 53, 0.5)';
                    ctx.setLineDash([5, 3]);
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(personA.x + personA.radius + forceLength/2, personA.y);
                    ctx.lineTo(personB.x - personB.radius - forceLength/2, personB.y);
                    ctx.stroke();
                    ctx.setLineDash([]);
                    
                    // æ ‡æ³¨"å¤§å°ç›¸ç­‰"
                    ctx.fillStyle = '#2A5CAA';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('å¤§å°ç›¸ç­‰', centerX, personA.y - 60);
                }
            }
            
            // ç»˜åˆ¶è´¨é‡æ ‡ç­¾
            ctx.fillStyle = '#2A5CAA';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`è´¨é‡: ${personA.mass}`, personA.x, personA.y - personA.radius - 15);
            ctx.fillText(`è´¨é‡: ${personB.mass}`, personB.x, personB.y - personB.radius - 15);
            
            // ç»˜åˆ¶é€Ÿåº¦çŸ¢é‡ï¼ˆè¿åŠ¨æ—¶ï¼‰
            if (animationStep === 2 && (Math.abs(personA.vx) > 0.1 || Math.abs(personB.vx) > 0.1)) {
                const velocityScale = 20;
                
                // äººç‰©Açš„é€Ÿåº¦
                if (personA.vx > 0.1) {
                    drawVelocityArrow(
                        personA.x, personA.y + personA.radius + 20,
                        personA.x + personA.vx * velocityScale, personA.y + personA.radius + 20,
                        '#4CAF50',
                        `v_A = ${personA.vx.toFixed(2)}`
                    );
                }
                
                // äººç‰©Bçš„é€Ÿåº¦
                if (personB.vx < -0.1) {
                    drawVelocityArrow(
                        personB.x, personB.y + personB.radius + 20,
                        personB.x + personB.vx * velocityScale, personB.y + personB.radius + 20,
                        '#4CAF50',
                        `v_B = ${personB.vx.toFixed(2)}`
                    );
                }
            }
        }
        
        function drawRocketScene() {
            const centerX = canvas.width / 2;
            
            // ç»˜åˆ¶æ˜Ÿç©ºèƒŒæ™¯
            drawStarfield();
            
            // ç»˜åˆ¶åœ°çƒè¡¨é¢
            const groundY = canvas.height - 50;
            ctx.fillStyle = '#2E7D32';
            ctx.fillRect(0, groundY, canvas.width, 50);
            
            // ç»˜åˆ¶å°¾æ°”ç²’å­
            for (const p of exhaustParticles) {
                const alpha = p.life;
                const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.size);
                gradient.addColorStop(0, `rgba(255, 107, 53, ${alpha})`);
                gradient.addColorStop(1, `rgba(255, 200, 50, 0)`);
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶ç«ç®­
            ctx.fillStyle = rocket.color;
            
            // ç«ç®­ä¸»ä½“
            ctx.fillRect(rocket.x - rocket.width/2, rocket.y - rocket.height/2, rocket.width, rocket.height);
            
            // ç«ç®­å¤´éƒ¨
            ctx.beginPath();
            ctx.moveTo(rocket.x - rocket.width/2, rocket.y - rocket.height/2);
            ctx.lineTo(rocket.x, rocket.y - rocket.height/2 - 30);
            ctx.lineTo(rocket.x + rocket.width/2, rocket.y - rocket.height/2);
            ctx.closePath();
            ctx.fill();
            
            // ç«ç®­å°¾ç¿¼
            ctx.fillStyle = '#888';
            ctx.fillRect(rocket.x - rocket.width/2 - 10, rocket.y + rocket.height/2 - 20, 10, 20);
            ctx.fillRect(rocket.x + rocket.width/2, rocket.y + rocket.height/2 - 20, 10, 20);
            
            // ç»˜åˆ¶çª—æˆ·
            ctx.fillStyle = '#87CEEB';
            ctx.beginPath();
            ctx.arc
<!--æ£€æµ‹åˆ°ä»£ç æˆªæ–­ï¼Œè‡ªåŠ¨ç»­å†™ä¸­...-->